(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(11),a=n.n(r),i=n(24),c=n(50),o=n(23),s=n(51),u=Object(c.createApi)({reducerPath:"paymentsApi",baseQuery:Object(c.fetchBaseQuery)({baseUrl:"/api/payments",prepareHeaders:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.currentUser.getIdToken(!0);case 2:return n=e.sent,t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{fetchProducts:e.query({query:function(){return"/products"},transformResponse:function(e){var t=e.prices||[];return t.sort((function(e,t){return t.amount-e.amount})),t}}),checkout:e.mutation({query:function(e){return{url:"/checkout",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.queryFulfilled;Object(s.a)(n,"Starting Your Payment",function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(null===(n=t.data)||void 0===n||null===(r=n.session)||void 0===r?void 0:r.id)&&(window.location.href=t.data.session.url);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!0)}}),fetchSession:e.query({query:function(e){return{url:"/retrieveSessionDetails",method:"POST",body:e}},onQueryStarted:function(e,t){var n=t.queryFulfilled;Object(s.a)(n,"Retrieving Your Payment")}}),fetchAllSessionsOfUser:e.query({query:function(){return"/retrieveAllSessionDetailsOfUser"}})}}}),l=u.useFetchProductsQuery,d=u.useCheckoutMutation,f=u.useFetchSessionQuery,p=u.useFetchAllSessionsOfUserQuery},104:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(11),a=n.n(r),i=n(24),c=n(191),o=n(42),s=n(23),u=Object(c.a)({reducerPath:"suggestionsApi",baseQuery:Object(o.fetchBaseQuery)({baseUrl:"",prepareHeaders:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.currentUser.getIdToken(!0);case 2:return n=e.sent,console.log(n),t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{getSuggestions:e.query({query:function(){return"api/suggestions"}})}}}),l=u.useGetSuggestionsQuery},121:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n(9),a={userOnOtherSide:null,isReceivingCall:!1,incomingCallDetails:null,callingStatus:!1,activeCall:null,activeCallDocId:null},i=Object(r.createSlice)({name:"call",initialState:a,reducers:{setUserOnOtherSide:function(e,t){var n=t.payload;e.userOnOtherSide=n},setIsReceivingCall:function(e,t){var n=t.payload;e.isReceivingCall=n},setIncomingCallDetails:function(e,t){var n=t.payload;e.incomingCallDetails=n},setCallingStatus:function(e,t){t.payload;e.callingStatus=!0},setActiveCall:function(e,t){var n=t.payload;e.activeCall=n},setActiveCallDocId:function(e,t){var n=t.payload;e.activeCallDocId=n},resetCallDetails:function(){return a}}}),c=i.actions,o=(c.setUserOnOtherSide,c.setIsReceivingCall),s=(c.setIncomingCallDetails,c.setCallingStatus),u=c.setActiveCall,l=c.setActiveCallDocId,d=c.resetCallDetails;t.a=i.reducer},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(11),a=n.n(r),i=n(24),c=n(50),o=n(23),s=n(51),u=n(121),l=Object(c.createApi)({reducerPath:"callApi",baseQuery:Object(c.fetchBaseQuery)({baseUrl:"/api/call",prepareHeaders:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.currentUser.getIdToken(!0);case 2:return n=e.sent,t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{createCall:e.mutation({query:function(e){return{url:"/createCall",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,i=n.dispatch,Object(s.a)(r,"Creating Call...",(function(e){i(Object(u.d)(e.data.callId))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),acceptCall:e.mutation({query:function(e){return{url:"/acceptCall",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,n.dispatch,Object(s.a)(r,"Accepting Call...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),deleteCall:e.mutation({query:function(e){return{url:"/deleteCall",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(s.a)(r,"Deleting Call...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}}}),d=l.useCreateCallMutation,f=l.useDeleteCallMutation,p=l.useAcceptCallMutation},182:function(e,t,n){"use strict";var r=n(8),a=n(14),i=n(150),c=n(158),o=n(260),s=n(0),u=n(183),l=n(19),d=n(23),f=n(4),p=Object(s.lazy)((function(){return n.e(8).then(n.bind(null,293))})),b=Object(i.a)((function(e){return{root:Object(a.a)({top:10,right:10,zIndex:10,background:"rgba(0, 0, 0, 0.4)",padding:"0.2rem 0.5rem",border:"3px solid rgba(0, 0, 0, 0.5)",borderRadius:"1rem",animation:"$fadeIn 0.5s ease",cursor:"pointer","&:active":{"& svg":{transform:"scale(1) rotate(0)"}},"&:hover":{background:"rgba(0, 0, 0, 0.6)","& svg":{transform:"scale(1.1) rotate(-15deg)"}}},e.breakpoints.down("sm"),{position:"static !important",marginTop:"1rem",width:"fit-content",margin:"auto",fontSize:"0.8rem"}),coin:{width:"1.5rem",height:"1.5rem",transition:"all 0.5s ease"},"@keyframes fadeIn":{"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(5rem)"}},container:{animation:"$fadeIn 0.5s ease",display:"flex",justifyContent:"center",alignItems:"center",transition:"all 0.5s ease",gap:"0.5rem"}}}));t.a=function(e){var t=e.position,n=void 0===t?"absolute":t,a=b(),i=Object(s.useState)(0),h=Object(r.a)(i,2),j=h[0],m=h[1],O=Object(s.useState)(0),g=Object(r.a)(O,2),v=g[0],y=g[1],x=Object(s.useState)(!0),w=Object(r.a)(x,2),S=w[0],k=w[1],C=Object(s.useState)(!1),D=Object(r.a)(C,2),I=D[0],F=D[1],A=Object(l.useSelector)((function(e){return e.user.userData.uid})),N=Object(l.useSelector)((function(e){return e.user.userData.role}));return Object(s.useEffect)((function(){var e;if(j!==v){var t=v-j;return e=setTimeout((function(){j===v?clearInterval(e):m(t>0?j+1:j-1)}),50),function(){clearTimeout(e)}}clearTimeout(e)}),[j,v]),Object(s.useEffect)((function(){var e=function(){};return"user"===N&&(e=d.b.collection("accounts").doc(A).onSnapshot((function(e){var t=e.data();t&&(y(t.credits),k(!1))}),(function(e){console.log(e)}))),"unlimited"===N&&k(!1),function(){e()}}),[A,N]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:a.root,style:{position:n},children:S?Object(f.jsx)(c.a,{size:20}):Object(f.jsxs)("div",{onClick:function(){return"user"===N&&F(!0)},className:a.container,children:[Object(f.jsx)(u.a,{className:a.coin}),"x",Object(f.jsx)("span",{style:{fontSize:"unlimited"===N?20:16},children:"user"===N?j:"\u221e"})]})}),Object(f.jsx)(o.a,{open:I,onClose:function(){return F(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,children:Object(f.jsx)(s.Suspense,{fallback:Object(f.jsx)("div",{className:a.container,style:{width:"100%",height:"100vh"},children:Object(f.jsx)(c.a,{})}),children:Object(f.jsx)(p,{})})})]})}},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r,a,i,c=n(0),o=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function l(e,t){var n=e.title,l=e.titleId,d=u(e,o);return c.createElement("svg",s({width:100,height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},d),n?c.createElement("title",{id:l},n):null,r||(r=c.createElement("circle",{cx:50,cy:50,r:47.5,fill:"#FFD97B",stroke:"#B79236",strokeWidth:5})),a||(a=c.createElement("path",{d:"M71.0305 48.6882H76.6151C76.6151 34.3635 65.8005 23.5601 51.4563 23.5601V29.1447C62.7987 29.1447 71.0305 37.3625 71.0305 48.6882Z",fill:"#B79236"})),i||(i=c.createElement("path",{d:"M51.4843 40.3143C57.3566 40.3143 59.8613 42.819 59.8613 48.6912H65.4459C65.4459 39.686 60.4895 34.7296 51.4843 34.7296V40.3143ZM61.0396 55.5129C60.5031 55.0252 59.798 54.7651 59.0733 54.7875C58.3486 54.8099 57.6609 55.1131 57.1555 55.633L50.4735 62.5049C48.8651 62.1977 45.6316 61.1897 42.3032 57.8696C38.9747 54.5384 37.9667 51.2965 37.6679 49.6993L44.5342 43.0145C45.0547 42.5094 45.3583 41.8216 45.3807 41.0967C45.4032 40.3718 45.1426 39.6666 44.6543 39.1303L34.3367 27.7851C33.8481 27.2472 33.1691 26.9209 32.4439 26.8756C31.7187 26.8302 31.0043 27.0694 30.4525 27.5422L24.3932 32.7387C23.9104 33.2232 23.6223 33.8681 23.5834 34.5509C23.5415 35.249 22.7429 51.7851 35.5653 64.6131C46.7513 75.7963 60.7632 76.6144 64.6222 76.6144C65.1862 76.6144 65.5325 76.5977 65.6246 76.5921C66.3074 76.5539 66.9519 76.2645 67.434 75.7795L72.6278 69.7174C73.101 69.166 73.3406 68.4519 73.2957 67.7266C73.2509 67.0014 72.9251 66.3222 72.3876 65.8333L61.0396 55.5129V55.5129Z",fill:"#B79236"})))}var d=c.forwardRef(l);n.p},186:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));var r=n(11),a=n.n(r),i=n(24),c=n(9),o=n(23),s=Object(c.createAsyncThunk)("friends/sendFriendRequest",function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,i,c,s,u,l,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.friendUid,i=t.uid,r){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,c=o.b.batch(),s=Object(o.d)(),u=o.b.collection("notifications").doc(),l=o.b.collection("users").doc(i).collection("notifications").doc(u.id),d=o.b.collection("users").doc(r).collection("notifications").doc(u.id),c.set(u,{from:i,to:r,status:"pending",createdAt:s,lastModified:s}),c.set(l,{notificationId:u.id,status:"pending",seen:!1}),c.set(d,{notificationId:u.id,status:"pending",seen:!1}),e.next=14,c.commit();case 14:return e.abrupt("return",{message:"Successfully sent request"});case 17:return e.prev=17,e.t0=e.catch(3),e.abrupt("return",n.rejectWithValue({message:"Error Sending Request"}));case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,n){return e.apply(this,arguments)}}()),u=Object(c.createSlice)({name:"friends",initialState:{friendsData:[],friendRequestSendingStatus:{isSuccess:!1,isError:null,message:""},error:null},reducers:{setFriends:function(e,t){var n=t.payload;e.friendsData=n}},extraReducers:function(e){e.addCase(s.fulfilled,(function(e,t){var n=t.payload;e.friendRequestSendingStatus={isError:null,isSuccess:!0,message:n}})),e.addCase(s.rejected,(function(e,t){var n=t.payload;e.friendRequestSendingStatus={isError:!0,isSuccess:!1,message:n}})),e.addCase(s.pending,(function(e,t){t.payload;e.friendRequestSendingStatus={isError:null,isSuccess:!1,message:""}}))}}),l=u.actions.setFriends;t.a=u.reducer},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f}));var r=n(11),a=n.n(r),i=n(24),c=n(94);n(237),n(250);c.a.apps.length||c.a.initializeApp({apiKey:"AIzaSyBwRU9JU9yA3QMUIm-G5ZNImuw9KW1rJgI",authDomain:"vc-room-6ffa6.firebaseapp.com",projectId:"vc-room-6ffa6",storageBucket:"vc-room-6ffa6.appspot.com",messagingSenderId:"266576969763",appId:"1:266576969763:web:fca7ffe149d45047a57196",measurementId:"G-5GVLFHSBL3"});var o=c.a.auth(),s=c.a.firestore(),u=c.a.firestore.FieldValue.serverTimestamp,l=new c.a.auth.GoogleAuthProvider,d=function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.signInWithPopup(l);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.collection("users").doc(t.uid),e.next=3,n.get();case 3:if(!(r=e.sent).exists){e.next=8;break}return e.abrupt("return",r.data());case 8:return i=s.batch(),c={uid:t.uid,displayName:t.displayName,status:"Hello There!! M new here",photoURL:t.photoURL,email:t.email,createdAt:u(),role:"user"},i.set(n,c),o=s.collection("accounts").doc(t.uid),i.set(o,{uid:t.uid,credits:50}),e.next=15,i.commit();case 15:return e.next=17,n.get().then((function(e){return e.data()}));case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},230:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(32),c=n.n(i),o=(n(230),n(11)),s=n.n(o),u=n(24),l=n(150),d=n(315),f=n(37),p=n(71),b=n(19),h=n(23),j=n(25),m=n(9),O=Object(m.createAsyncThunk)("user/fetchUserData",function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(h.c)(t);case 5:return a=e.sent,e.abrupt("return",Object(j.a)(Object(j.a)({},a),{},{createdAt:null===a||void 0===a||null===(r=a.createdAt)||void 0===r?void 0:r.toMillis()}));case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",n.rejectWithValue({message:"Error Getting Users"}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(m.createSlice)({name:"user",initialState:{userData:null,error:null},reducers:{},extraReducers:function(e){e.addCase(O.fulfilled,(function(e,t){e.userData=t.payload,e.error=null})),e.addCase(O.rejected,(function(e,t){e.userData=null,e.error=t.payload}))}}).reducer,v=n(8),y=n(14),x=n(65),w=n(304),S=n(44),k=n(305),C=n(306),D=n(141),I=n(95),F=n(157),A=n(206),N=n(99),P=n(193),R=n.n(P),U=n(155),q=n(303),B=n(190),z=n.n(B),E=Object(m.createSlice)({name:"ui",initialState:{fullPageBlurred:!1},reducers:{enableFullPageBlur:function(e){e.fullPageBlurred=!0},disableFullPageBlur:function(e){e.fullPageBlurred=!1}}}),W=E.actions,L=W.enableFullPageBlur,M=W.disableFullPageBlur,T=E.reducer,Q=n(174),H=n.n(Q),Y=n(116),V=n(317),G=n(181),J=n.n(G),X=n(78),Z=n(4),$=Object(l.a)((function(e){return{root:{width:"100%",minHeight:"5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",padding:"0.5rem",marginBottom:"1rem",backdropFilter:"blur( 10px )",WebkitBackdropFilter:"blur( 10px )",background:"rgba(0, 0, 0, 0.13)"},name:Object(y.a)({flex:1},e.breakpoints.down("sm"),{fontSize:"1rem"}),callIcon:{transform:"scaleX(-1)",transition:"all 0.5s ease",cursor:"pointer",fontSize:"2rem","&:hover":{color:e.palette.secondary.main}},avatar:Object(y.a)({height:e.spacing(10),width:e.spacing(10)},e.breakpoints.down("sm"),{height:e.spacing(6),width:e.spacing(6)})}})),_=function(e){var t=e.uid,n=void 0===t?"":t,r=e.displayName,a=void 0===r?"":r,i=e.photoURL,c=void 0===i?"":i,o=e.isFriend,l=void 0!==o&&o,d=$(),f=Object(b.useSelector)((function(e){return e.user.userData})),p=Object(X.e)(),h=Object(v.a)(p,1)[0];if(n===f.uid)return null;var j=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h({friendUid:n});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Y.a,{elevation:3,className:d.root,children:[Object(Z.jsx)(V.a,{alt:"profile",src:c,className:d.avatar}),Object(Z.jsxs)(D.a,{variant:"h6",className:d.name,children:[" ",a," "]}),!l&&Object(Z.jsx)(J.a,{onClick:j,className:d.callIcon})]})},K=n(50),ee=Object(K.createApi)({reducerPath:"searchApi",baseQuery:Object(K.fetchBaseQuery)({baseUrl:"/api/search",prepareHeaders:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.currentUser.getIdToken(!0);case 2:return n=e.sent,t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{getSearchResultsPeople:e.query({query:function(e){return{url:"/people",params:{searchString:e}}}})}}}),te=ee.useGetSearchResultsPeopleQuery,ne=Object(l.a)((function(e){return{searchbar:{maxWidth:"50rem",flex:1,minWidth:"0"},smoothAnimation:{borderRadius:e.spacing(3),transition:"all 0.4s ease"},searchContainer:Object(y.a)({position:"absolute",top:"12vh",left:"50%",minWidth:"50rem",zIndex:10,transform:"translateX(-50%)"},e.breakpoints.down("sm"),{minWidth:"90%",top:"10vh"})}})),re=function(){var e=ne(),t=Object(r.useState)(!1),n=Object(v.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(""),o=Object(v.a)(c,2),s=o[0],u=o[1],l=te(s,{skip:!s.length}).data,d=void 0===l?{users:[]}:l,f=Object(b.useDispatch)(),p=Object(b.useSelector)((function(e){return e.ui.fullPageBlurred})),h=Object(r.useCallback)(H()((function(e){u(e)}),500),[]);return Object(r.useEffect)((function(){a?f(L()):a||s.length||f(M())}),[a,s,f]),Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(U.a,{className:e.searchbar,variant:"outlined",placeholder:"Search People",margin:"dense",onChange:function(e){return h(e.target.value)},InputProps:{endAdornment:Object(Z.jsx)(q.a,{position:"start",children:Object(Z.jsx)(z.a,{color:"inherit"})}),classes:{notchedOutline:e.smoothAnimation},onFocus:function(){return i(!0)},onBlur:function(){return i(!1)}}}),Object(Z.jsx)("div",{className:e.searchContainer,children:p?d.users.map((function(e,t){return Object(Z.jsx)(_,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,isFriend:e.isFriend},t)})):""})]})},ae=Object(m.createSlice)({name:"notifications",initialState:{notificationCount:0,notificationsData:[],error:null},reducers:{setNotificationCount:function(e,t){var n=t.payload;e.notificationCount=n},setNotifications:function(e,t){var n=t.payload;e.notificationsData=n}}}),ie=ae.actions,ce=ie.setNotificationCount,oe=ie.setNotifications,se=ae.reducer,ue=Object(x.a)((function(e){return{root:{width:"100%",minHeight:"3.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",padding:"0.5rem",marginBottom:"1rem",backdropFilter:"blur( 10px )",WebkitBackdropFilter:"blur( 10px )",background:"rgba(0, 0, 0, 0.13)"},notificationBody:{flex:1},buttonContainer:{display:"flex",gap:"0.5rem"}}})),le=function(e){var t=e.notification,n=ue(),a=Object(r.useState)(null),i=Object(v.a)(a,2),c=i[0],o=i[1],s=!(Object(b.useSelector)((function(e){return e.user.userData.uid}))!==t.to),u=Object(X.b)(),l=Object(v.a)(u,1)[0],d=Object(X.c)(),f=Object(v.a)(d,1)[0],p=c||{photoURL:"",displayName:""},j=p.photoURL,m=p.displayName;Object(r.useEffect)((function(){s?h.b.collection("users").doc(t.from).get().then((function(e){return o(e.data())})):h.b.collection("users").doc(t.to).get().then((function(e){return o(e.data())}))}),[t,s]);var O=function(){l({friendUid:t.from,notifId:t.notificationId})},g=function(){f({friendUid:s?t.from:t.to,notifId:t.notificationId})};return Object(Z.jsxs)(Y.a,{elevation:3,className:n.root,children:[Object(Z.jsx)(V.a,{alt:"profile",src:j,className:n.avatar}),Object(Z.jsx)(D.a,{variant:"caption",className:n.notificationBody,align:"left",children:"pending"===t.status?s?"".concat(m," has sent you a connection request."):"You sent a connection request to ".concat(m,"."):"accepted"===t.status?s?"You have accepted ".concat(m,"'s connection request."):"".concat(m," has accepted your connection request."):void 0}),function(){if("pending"===t.status)return s?Object(Z.jsxs)("div",{className:n.buttonContainer,children:[Object(Z.jsx)(I.a,{style:{padding:"5px 9px"},variant:"outlined",color:"primary",onClick:O,children:"Accept"}),Object(Z.jsx)(I.a,{style:{padding:"5px 9px"},variant:"outlined",color:"secondary",onClick:g,children:"Decline"})]}):Object(Z.jsx)(I.a,{style:{padding:"5px 9px"},variant:"outlined",color:"secondary",onClick:g,children:"Decline"})}()]})},de=Object(l.a)((function(e){return{root:{position:"fixed",top:"10vh",right:"1rem",width:"30rem",maxWidth:"90%",padding:"0.5rem",zIndex:2e3,backdropFilter:"blur( 10px )",WebkitBackdropFilter:"blur( 10px )",background:"rgba(0, 0, 0, 0.3)",height:"28rem",maxHeight:"80vh",overflowY:"scroll",textAlign:"center"}}})),fe=function(e){var t=e.uid,n=de(),a=Object(b.useDispatch)(),i=Object(b.useSelector)((function(e){return e.notifications.notificationsData}));return Object(r.useEffect)((function(){t.length&&h.b.collection("users").doc(t).collection("notifications").onSnapshot(function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,i,c,o,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.docs.map((function(e){return e.data()})),r=[],i=0;case 3:if(!(i<n.length)){e.next=13;break}return u=h.b.collection("notifications").doc(n[i].notificationId),e.next=7,u.get();case 7:l=e.sent,d=l.data(),r.push(Object(j.a)(Object(j.a)({},d),{},{notificationId:l.id,createdAt:(null===(c=d.createdAt)||void 0===c?void 0:c.toMillis())||0,lastModified:(null===(o=d.lastModified)||void 0===o?void 0:o.toMillis())||0}));case 10:i++,e.next=3;break;case 13:r.sort((function(e,t){return t.lastModified-e.lastModified})),a(oe(r));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t,a]),Object(Z.jsx)(Y.a,{className:n.root,children:i.map((function(e){return Object(Z.jsx)(le,{notification:e},e.notificationId)}))})},pe=n(104),be=function(e){var t=e.children,n=e.window,r=Object(w.a)({disableHysteresis:!0,threshold:0,target:n?n():void 0});return a.a.cloneElement(t,{elevation:r?6:0,id:r?"navbar-blur":"navbar-noblur"})},he=Object(x.a)((function(e){var t,n;return{appBar:(t={padding:"1rem 16px",alignItems:"center",flexDirection:"row",justifyContent:"space-between",background:e.palette.background.default},Object(y.a)(t,e.breakpoints.up("sm"),{paddingLeft:"24px",paddingRight:"24px"}),Object(y.a)(t,"&#navbar-blur",{background:"rgb(0, 0, 0, 0.5)",transition:"background 0.5s ease-in-out",backdropFilter:" blur(16px) saturate(180%)","&:hover":{background:e.palette.background.default}}),t),logo:Object(y.a)({fontFamily:"Allison"},e.breakpoints.down("md"),{fontSize:"2.5rem",marginRight:"1rem",width:"fit-content"}),navLinks:(n={display:"flex",gap:"1.5rem"},Object(y.a)(n,e.breakpoints.down("md"),{gap:"1.2rem","& *":{padding:0}}),Object(y.a)(n,e.breakpoints.down("sm"),{marginLeft:"0.5rem","& *":{padding:0,width:"fit-content",minWidth:"fit-content","& .MuiBadge-badge":{minWidth:"20px"}}}),n)}})),je=function(e){var t=he(),n=Object(b.useDispatch)(),a=Object(b.useSelector)((function(e){return e.user.userData})),i=Object(S.a)(),c=Object(k.a)(i.breakpoints.down("sm")),o=Object(f.i)(),s=Object(b.useSelector)((function(e){return e.notifications.notificationCount})),u=Object(r.useState)(!1),l=Object(v.a)(u,2),d=l[0],m=l[1];return Object(r.useEffect)((function(){var e;return a&&(e=h.b.collection("users").doc(a.uid).collection("notifications").where("status","==","pending").where("seen","==",!1).onSnapshot((function(e){(n(ce(e.docs.length)),"/dashboard"===o.path)&&(0,n(pe.a.endpoints.getSuggestions.initiate()).refetch)()}))),e}),[a,n,o.path]),Object(Z.jsxs)("div",{style:{position:"relative"},children:[Object(Z.jsx)(be,Object(j.a)(Object(j.a)({},e),{},{children:Object(Z.jsxs)(C.a,{className:t.appBar,elevation:0,color:"transparent",children:[Object(Z.jsx)(N.b,{to:"/",children:Object(Z.jsx)(D.a,{variant:"h2",className:t.logo,children:c?"VS":"VC Room"})}),a&&Object(Z.jsx)(re,{}),Object(Z.jsx)("div",{className:t.navLinks,children:a?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(I.a,{onClick:function(){return m(!d)},color:"primary",children:Object(Z.jsx)(F.a,{color:"primary",badgeContent:s,children:Object(Z.jsx)(R.a,{id:"notification-dropdown"})})}),Object(Z.jsx)(I.a,{color:"secondary",onClick:function(){h.a.signOut(),p.b.success("Signed Out Successfully")},children:"Sign Out"})]}):Object(Z.jsx)(I.a,{color:"secondary",variant:"outlined",onClick:function(){window.open("https://github.com/")},children:"Learn More"})})]})})),a&&d&&Object(Z.jsx)(A.a,{onClickAway:function(e){"notification-dropdown"!==e.target.parentNode.id&&m(!1)},children:Object(Z.jsx)("div",{children:Object(Z.jsx)(fe,{uid:a.uid})})})]})},me=Object(l.a)((function(e){return{disabled:{},enabled:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:10,backdropFilter:"blur( 10px )",WebkitBackdropFilter:"blur( 10px )",background:"rgba(0, 0, 0, 0.3)"}}})),Oe=function(){var e=me(),t=Object(b.useSelector)((function(e){return e.ui.fullPageBlurred})),n=Object(b.useDispatch)();return Object(Z.jsx)("div",{onClick:function(){return n(M())},style:{transition:"all 0.5s ease"},className:t?e.enabled:e.disabled})},ge=n(158),ve=Object(x.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh"},loader:{width:"100px",height:"100px"}}})),ye=function(){var e=ve();return Object(Z.jsx)("div",{className:e.root,children:Object(Z.jsx)(ge.a,{className:e.loader})})},xe=n(260),we=n(311),Se=n(312),ke=n(313),Ce=n(314),De=n(195),Ie=n.n(De),Fe=n(196),Ae=n.n(Fe),Ne=n(185),Pe=n.n(Ne),Re=n(30),Ue=n(87),qe=n.n(Ue),Be=n(40),ze=n(201),Ee=n(140);Be.d.register(Be.c,Be.i,Be.k,Be.h,Be.o,Be.p,Be.f);var We,Le=Object(x.a)((function(e){return{paper:Object(y.a)({padding:"1rem",flex:1,position:"relative",width:"60%"},e.breakpoints.down("800"),{padding:"0.5rem",overflowX:"scroll",width:"100%","& canvas":{overflowX:"scroll"}})}})),Me=function(e){var t=e.uid,n=Object(r.useState)([]),a=Object(v.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)([]),s=Object(v.a)(o,2),u=s[0],l=s[1],d=Object(r.useRef)(),f=Object(r.useRef)(),p=Le(),b=Object(Ee.a)(),m=Object(k.a)("(max-width:800px)"),O=i.length||u.length?[].concat(Object(Re.a)(i),Object(Re.a)(u)).filter((function(e){return new Date(e.timeStamp).getTime()>new Date((new Date).setDate((new Date).getDate()-10)).getTime()})).sort((function(e,t){return e.timeStamp-t.timeStamp})):[],g=O.length?qe()().diff(qe()(O[0].timeStamp),"days")+1+(qe()(O[0].timeStamp).isSame(qe()(),"day")?0:1):0,y=Object(Re.a)(Array(10<g?10:g).keys()).map((function(e){var t=new Date((new Date).setDate((new Date).getDate()-e)).toDateString();return t.slice(4,t.length)})).reverse();Object(r.useEffect)((function(){var e=function(){},n=function(){};if(t){var r=h.b.collection("calls").where("from","==",t).where("callAccepted","==",!0);e=r.onSnapshot((function(e){var t=e.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id,timeStamp:e.data().timeStamp.toMillis()})}));l(t)}));var a=h.b.collection("calls").where("userOnOtherSide","==",t).where("callAccepted","==",!0);n=a.onSnapshot((function(e){var t=e.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id,timeStamp:e.data().timeStamp.toMillis()})}));c(t)}))}return function(){e(),n()}}),[t]);var x={labels:y,datasets:[{label:"Outgoing Calls",data:y.map((function(e){return u.filter((function(t){return new Date(t.timeStamp).toDateString().slice(4)===e})).length})),borderColor:b.palette.secondary.main,backgroundColor:b.palette.secondary.main,tension:.15},{label:"Incoming Calls",data:y.map((function(e){return i.filter((function(t){return new Date(t.timeStamp).toDateString().slice(4)===e})).length})),borderColor:b.palette.primary.main,backgroundColor:b.palette.primary.main,tension:.15}]};return Object(r.useEffect)((function(){if(d.current&&f.current){var e,t=f.current.clientWidth,n=f.current.clientHeight-60,r=(91*g>t?91*g:t)-20,a=null===(e=d.current)||void 0===e?void 0:e.getContext("2d");a.chart.resize(m?r:t,n),window.addEventListener("resize",(function(){var e,r,i,c=(91*g>t?91*g:t)-20;(t=null===(e=f.current)||void 0===e?void 0:e.clientWidth,(n=(null===(r=f.current)||void 0===r?void 0:r.clientHeight)-60)&&t)&&(null===a||void 0===a||null===(i=a.chart)||void 0===i||i.resize(m?c:t,n))}))}window.removeEventListener("resize",(function(){console.log("removed")}))}),[m,g]),i.length||u.length?Object(Z.jsx)(Y.a,{ref:f,elevation:9,className:p.paper,children:Object(Z.jsx)(ze.a,{ref:d,data:x,style:{width:m?91*g:"100%",height:"100% !important",display:"block",minHeight:"20rem",maxHeight:m?"20rem":"70vh"},options:{responsive:!m,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{filler:{propagate:!0},legend:{labels:{font:{size:b.typography.htmlFontSize},color:b.palette.text.primary}},title:{display:!0,text:"Successfully Connected Calls",font:{size:m?b.typography.fontSize:24,family:"Poppins",weight:500},color:b.palette.text.primary,align:m?"start":"center"}},scales:{y:{type:"linear",display:!0,position:"left",id:"y",ticks:{font:{size:m?12:b.typography.fontSize,family:"Poppins"},color:b.palette.text.primary,precision:0}},x:{type:"category",display:!0,position:"bottom",id:"x",ticks:{font:{size:m?12:b.typography.fontSize,family:"Poppins"},color:b.palette.text.primary,align:"center"}}}}})}):Object(Z.jsx)(D.a,{variant:"h6",align:"center",children:"Go make some calls!"})},Te=n(51),Qe=Object(K.createApi)({reducerPath:"userApi",baseQuery:Object(K.fetchBaseQuery)({baseUrl:"/api/user",prepareHeaders:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.currentUser.getIdToken(!0);case 2:return n=e.sent,t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{updateUser:e.mutation({query:function(e){return{url:"/updateUser",method:"POST",body:e}},onQueryStarted:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,a=n.dispatch,Object(Te.a)(r,"Updating User...",(function(){a(O(h.a.currentUser))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),deleteUser:e.mutation({query:function(){return"/deleteUser"},onQueryStarted:function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(Te.a)(r,"Deleting User...",(function(){h.a.signOut()}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}}}),He=Qe.useUpdateUserMutation,Ye=Qe.useDeleteUserMutation,Ve=n(182),Ge=n(115),Je=n(101),Xe=n(310),Ze=[{field:"createdAt",headerName:"Created At",width:220,filterable:!1,valueFormatter:function(e){return qe()(e.value).format("DD MMM, YYYY @ h:mm:ss a")}},{field:"sessionId",headerName:"Session Id",minWidth:600},{field:"amount",headerName:"Amount",width:150,valueFormatter:function(e){return"\u20b9 ".concat(e.value)}},{field:"quantity",headerName:"Quantity",width:150,valueFormatter:function(e){return"".concat(e.value," VCoins")}},{field:"paymentStatus",headerName:"Status",width:180},{field:"paidAt",headerName:"Paid At",width:220,filterable:!1,valueFormatter:function(e){return e.value?qe()(e.value).format("DD MMM, YYYY @ h:mm:ss a"):"Not Paid Yet"}},{field:"action",headerName:"Action",width:150,filterable:!1,sortable:!1,renderCell:function(e){switch(e.getValue(e.id,"paymentStatus")){case"succeeded":return Object(Z.jsx)(I.a,{variant:"outlined",color:"primary",onClick:function(){window.open(e.getValue(e.id,"receiptUrl"),"_blank")},children:"View Receipt"});case"requires_payment_method":return Object(Z.jsx)(I.a,{variant:"outlined",color:"secondary",onClick:function(){window.location.href=e.getValue(e.id,"resumeUrl")},children:"Resume Payment"});default:return""}}}],$e=function(){var e=Object(r.useState)([]),t=Object(v.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(5),c=Object(v.a)(i,2),o=c[0],s=c[1],u=Object(S.a)(),l=Object(k.a)(u.breakpoints.down("sm")),d=Object(b.useSelector)((function(e){return e.user.userData.uid})),f=Object(Je.c)(null,{skip:!d}),p=f.data,h=f.isFetching,m=f.refetch;return Object(r.useEffect)((function(){(null===p||void 0===p?void 0:p.sessions)?a(p.sessions):a([])}),[p,h]),Object(Z.jsx)("div",{style:{height:500,width:"100%"},children:Object(Z.jsx)(Ge.a,{rows:n,columns:Ze,pageSize:o,onPageSizeChange:function(e){return s(e)},rowsPerPageOptions:[5,10,20],pagination:!0,autoHeight:!0,loading:h,components:{Toolbar:function(e){return Object(Z.jsxs)(Ge.d,Object(j.a)(Object(j.a)({style:l?{flexDirection:"column"}:{flexDirection:"row"}},e),{},{children:[Object(Z.jsx)(Ge.c,Object(j.a)({style:l?{flexWrap:"wrap",marginLeft:"auto"}:{flexDirection:"row"}},e)),Object(Z.jsx)(I.a,{variant:"contained",color:"primary",onClick:function(){m()},children:"Refresh"})]}))},LoadingOverlay:function(e){return Object(Z.jsx)(Ge.b,{children:Object(Z.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},children:Object(Z.jsx)(Xe.a,{})})})}}})})},_e=Object(x.a)((function(e){var t,n;return{root:(t={flex:1,position:"relative",marginTop:"7rem",width:"100%",margin:"0 auto",display:"flex",flexDirection:"column",alignItems:"center",gap:"3rem",padding:"1.5rem 0"},Object(y.a)(t,e.breakpoints.down("sm"),{width:"90%"}),Object(y.a)(t,e.breakpoints.down("xs"),{width:"100%",marginTop:"10vh"}),t),flexParent:Object(y.a)({width:"60%",display:"flex",gap:"2rem",justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column",alignItems:"center",gap:"1rem",width:"100%"}),paper:Object(y.a)({display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",padding:"1rem"},e.breakpoints.down("xs"),{width:"100%"}),avatarImage:Object(y.a)({width:"150px",height:"150px",margin:"0 auto"},e.breakpoints.down("sm"),{width:"80px",height:"80px"}),editIcon:Object(y.a)({width:35,height:35,padding:5,borderRadius:"50%",border:"4px solid ".concat(e.palette.background.paper),background:e.palette.text.primary,cursor:"pointer",transition:"all 0.5s ease","&:hover":{transform:"scale(1.2) rotate(-20deg)"}},e.breakpoints.down("sm"),{width:30,height:30,padding:2}),form:{display:"flex",flexDirection:"column",gap:"2rem",flex:1},buttonContainer:(n={display:"flex",justifyContent:"space-between",gap:"2rem",width:"100%",marginTop:"auto"},Object(y.a)(n,e.breakpoints.down("sm"),{gap:"1rem"}),Object(y.a)(n,e.breakpoints.down("xs"),{flexDirection:"column",alignItems:"center",gap:"1rem","& button":{width:"100% !important"}}),n)}})),Ke=function(){var e=_e(),t=Object(f.g)(),n=Object(r.useState)(),a=Object(v.a)(n,2),i=a[0],c=a[1],o=Object(r.useState)(!1),l=Object(v.a)(o,2),d=l[0],m=l[1],O=Object(r.useState)(!1),g=Object(v.a)(O,2),y=g[0],x=g[1],w=Object(b.useSelector)((function(e){return e.user.userData})),S=He(),k=Object(v.a)(S,2),C=k[0],A=k[1],N=A.isLoading,P=A.isSuccess,R=A.isError,q=Ye(),B=Object(v.a)(q,2),z=B[0],E=B[1],W=E.isLoading,L=E.isSuccess;Object(r.useEffect)((function(){w?c(w):t.push("/")}),[w,t]),Object(r.useEffect)((function(){if(i){var e=Object.keys(i),t=Object.values(i),n=e.some((function(e,n){return!!w[e]&&w[e]!==t[n]}));m(n)}}),[i,w]),Object(r.useEffect)((function(){var e=function(){};if(w){var t=w.uid,n=h.b.collection("users").doc(t).collection("friends");e=n.onSnapshot((function(e){var t=e.docs.length;c((function(e){return Object(j.a)(Object(j.a)({},e),{},{numFriends:t})}))}))}return function(){e()}}),[w]),Object(r.useEffect)((function(){P&&m(!1),R&&c((function(e){return Object(j.a)(Object(j.a)({},e),w)}))}),[P,R,w]),Object(r.useEffect)((function(){L&&t.push("/")}),[L,t]);var M=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return p.b.info("No changes to update"),e.abrupt("return");case 3:t={},i.displayName!==w.displayName&&(t.displayName=i.displayName),i.photoURL!==w.photoURL&&(t.image=i.photoURL),i.status!==w.status&&(t.status=i.status),C(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=2;break}return e.abrupt("return");case 2:z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i?Object(Z.jsxs)("div",{className:e.root,children:[Object(Z.jsxs)("div",{className:e.flexParent,children:[Object(Z.jsxs)(Y.a,{elevation:9,className:e.paper,children:[Object(Z.jsxs)(F.a,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:Object(Z.jsx)("label",{htmlFor:"profile-image",children:Object(Z.jsx)(Ie.a,{color:"primary",className:e.editIcon})}),children:[Object(Z.jsx)(V.a,{alt:i.displayName,src:i.photoURL,className:e.avatarImage}),Object(Z.jsx)("input",{style:{display:"none"},type:"file",id:"profile-image",accept:"image/png, image/jpeg",onChange:function(e){var t=e.target.files[0];try{var n=new FileReader;if("image"!==t.type.split("/")[0])throw new Error("Invalid image type");if(t.size>5e6)throw new Error("Image is too large");n.readAsDataURL(t),n.onload=function(e){c((function(t){return Object(j.a)(Object(j.a)({},t),{},{photoURL:e.target.result})}))}}catch(r){p.b.error(r.message)}}})]}),Object(Z.jsx)(Ve.a,{position:"static"}),Object(Z.jsx)(D.a,{variant:"subtitle1",children:i.email}),Object(Z.jsxs)(D.a,{variant:"subtitle1",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(Z.jsx)(Pe.a,{}),i.numFriends," Friends"]})]}),Object(Z.jsxs)(Y.a,{elevation:9,className:"".concat(e.paper," ").concat(e.form," "),children:[Object(Z.jsx)(U.a,{fullWidth:!0,color:"primary",label:"Display Name",type:"text",name:"displayName",value:i.displayName,onChange:function(e){e.target.value.length<=50&&c(Object(j.a)(Object(j.a)({},i),{},{displayName:e.target.value}))},disabled:N}),Object(Z.jsx)(U.a,{color:"secondary",fullWidth:!0,label:"Status",type:"text",name:"status",value:i.status,onChange:function(e){e.target.value.length<=80&&c(Object(j.a)(Object(j.a)({},i),{},{status:e.target.value}))},disabled:N}),Object(Z.jsxs)("div",{className:e.buttonContainer,children:[Object(Z.jsx)(I.a,{variant:"contained",color:"primary",disabled:!d||N,onClick:M,style:{minWidth:"fit-content",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:"Update"}),Object(Z.jsx)(I.a,{variant:"contained",color:"secondary",onClick:function(){c((function(e){return Object(j.a)(Object(j.a)({},e),w)})),m(!1)},disabled:!d||N,style:{minWidth:"fit-content",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:"Reset"}),Object(Z.jsx)(I.a,{variant:"outlined",color:"secondary",onClick:function(){return x(!0)},fullWidth:!0,startIcon:Object(Z.jsx)(Ae.a,{}),style:{minWidth:"fit-content",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:"Delete Account"})]})]})]}),Object(Z.jsx)(Me,{uid:w.uid}),Object(Z.jsxs)("div",{style:{width:"100%"},children:[Object(Z.jsx)(D.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Your Payments"}),Object(Z.jsx)($e,{})]}),Object(Z.jsxs)(xe.a,{open:y,onClose:function(){return x(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(Z.jsx)(we.a,{id:"alert-dialog-title",children:"Are you sure you want to delete your account?"}),Object(Z.jsx)(Se.a,{children:Object(Z.jsx)(ke.a,{id:"alert-dialog-description",children:"This action cannot be undone."})}),Object(Z.jsxs)(Ce.a,{children:[Object(Z.jsx)(I.a,{onClick:function(){return x(!1)},color:"primary",children:"Cancel"}),Object(Z.jsx)(I.a,{onClick:T,color:"secondary",autoFocus:!0,children:"Delete"})]})]})]}):null},et=n(200),tt=Object(r.lazy)((function(){return n.e(10).then(n.bind(null,472))})),nt=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(9)]).then(n.bind(null,470))})),rt=Object(r.lazy)((function(){return Promise.all([n.e(4),n.e(6)]).then(n.bind(null,473))})),at=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(11)]).then(n.bind(null,474))})),it=Object(l.a)((function(){return{container:{minHeight:"100vh",display:"flex",flexDirection:"column",position:"relative"}}})),ct=function(){var e=it(),t=Object(b.useDispatch)(),n=Object(b.useSelector)((function(e){return e.user})),a=n.userData,i=n.error,c=Object(r.useRef)();return Object(r.useEffect)((function(){var e=h.a.onAuthStateChanged(function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(O(n)),n&&p.b.success("Welcome ".concat(n.displayName));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[t]),Object(r.useEffect)((function(){return a?h.a.currentUser.getIdToken(!0).then((function(e){c.current=Object(et.a)("",{auth:{token:e}}),c.current&&(c.current.on("connect",(function(){console.log("connected")})),c.current.on("disconnect",(function(){console.log("disconnected")})),c.current.on("error",(function(e){console.log("error",e)})))})):c.current&&(c.current.close(),c.current=null),function(){c.current&&(c.current.close(),c.current=null)}}),[a]),Object(Z.jsxs)(d.a,{maxWidth:"xl",className:e.container,children:[Object(Z.jsx)(p.a,{position:"top-center",reverseOrder:!1}),Object(Z.jsx)(je,{}),Object(Z.jsx)(r.Suspense,{fallback:Object(Z.jsx)(ye,{}),children:Object(Z.jsxs)(f.d,{children:[Object(Z.jsx)(f.b,{path:"/",exact:!0,children:!a||i?Object(Z.jsx)(tt,{}):Object(Z.jsx)(f.a,{to:"/dashboard"})}),Object(Z.jsx)(f.b,{path:"/dashboard",exact:!0,children:a&&!i?Object(Z.jsx)(nt,{}):Object(Z.jsx)(f.a,{to:"/"})}),Object(Z.jsx)(f.b,{path:"/call",exact:!0,children:Object(Z.jsx)(rt,{})}),Object(Z.jsx)(f.b,{path:"/profile",exact:!0,children:Object(Z.jsx)(Ke,{})}),Object(Z.jsx)(f.b,{path:"/payments",exact:!0,children:Object(Z.jsx)(at,{})})]})}),Object(Z.jsx)(Oe,{})]})},ot=n(307),st=n(89),ut=Object(st.b)({palette:{type:"dark",background:{default:"#1C1D28",paper:"#28293D"},primary:{main:"#4e69ff"}},typography:{fontFamily:'"Poppins", sans-serif'}}),lt=n(316),dt=n(186),ft=n(121),pt=n(122),bt=Object(m.configureStore)({reducer:(We={user:g,friends:dt.a,ui:T,notifications:se,call:ft.a},Object(y.a)(We,pe.a.reducerPath,pe.a.reducer),Object(y.a)(We,X.a.reducerPath,X.a.reducer),Object(y.a)(We,ee.reducerPath,ee.reducer),Object(y.a)(We,Qe.reducerPath,Qe.reducer),Object(y.a)(We,pt.a.reducerPath,pt.a.reducer),Object(y.a)(We,Je.a.reducerPath,Je.a.reducer),We),middleware:function(e){return e().concat(pe.a.middleware).concat(X.a.middleware).concat(ee.middleware).concat(Qe.middleware).concat(pt.a.middleware).concat(Je.a.middleware)}}),ht=(bt.dispatch,Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function jt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(Z.jsxs)(a.a.StrictMode,{children:[Object(Z.jsx)(N.a,{children:Object(Z.jsxs)(ot.a,{theme:ut,children:[Object(Z.jsx)(lt.a,{}),Object(Z.jsx)(b.Provider,{store:bt,children:Object(Z.jsx)(ct,{})})]})}),","]}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ht?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):jt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):jt(t,e)}))}}()},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),a=n.n(r),i=n(24),c=n(71),o=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r,o,s,u=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),o=u.length>3&&void 0!==u[3]&&u[3],e.next=4,c.b.promise(t,{loading:n,success:function(e){return s=e,o||r(e),e.data.message},error:function(e){var t,n;return console.error("error",e),(null===e||void 0===e||null===(t=e.error)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Error"}});case 4:if(!o){e.next=7;break}return e.next=7,r(s);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},78:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return p}));var r=n(11),a=n.n(r),i=n(24),c=n(50),o=n(23),s=n(51),u=Object(c.createApi)({reducerPath:"friendsApi",baseQuery:Object(c.fetchBaseQuery)({baseUrl:"/api/friends",prepareHeaders:function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.currentUser.getIdToken(!0);case 2:return n=e.sent,t.set("Authorization","Bearer ".concat(n)),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),endpoints:function(e){return{sendFriendRequest:e.mutation({query:function(e){return{url:"/sendFriendRequest",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(s.a)(r,"Sending friend request...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),acceptFriendRequest:e.mutation({query:function(e){return{url:"/acceptFriendRequest",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(s.a)(r,"Accepting friend request...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),declineFriendRequest:e.mutation({query:function(e){return{url:"/declineFriendRequest",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(s.a)(r,"Declining friend request...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),removeFriend:e.mutation({query:function(e){return{url:"/removeFriend",method:"POST",body:e}},onQueryStarted:function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.queryFulfilled,Object(s.a)(r,"Removing friend...");case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}}}),l=u.useAcceptFriendRequestMutation,d=u.useSendFriendRequestMutation,f=u.useDeclineFriendRequestMutation,p=u.useRemoveFriendMutation}},[[249,2,3]]]);
//# sourceMappingURL=main.2a2d5ee7.chunk.js.map