{"version":3,"sources":["assets/friendsSearchWave.svg","hooks/useOnScreen.js","components/PanelFriendCard/PanelFriendCard.jsx","components/FriendsPanel/FriendsPanel.jsx","components/IncomingCallNotification/IncomingCallNotification.jsx","components/RecentCallCard/RecentCallCard.jsx","components/RecentCallsContainer/RecentCallsContainer.jsx","components/SuggestionCard/SuggestionCard.jsx","components/SuggestionsContainer/SuggestionsContainer.jsx","assets/profileWave.svg","features/friends/friends-selector.js","components/UserPanel/UserPanel.jsx","pages/Dashboard.jsx"],"names":["useOnScreen","ref","useState","isIntersecting","setIsIntersecting","useEffect","observer","IntersectionObserver","entry","node","current","observe","unobserve","disconnect","useStyles","makeStyles","theme","root","width","display","justifyContent","alignItems","padding","marginBottom","position","gap","breakpoints","down","name","fontSize","flex","callIcon","transform","transition","cursor","marginRight","color","palette","secondary","main","grey","error","noPadding","minWidth","PanelFriendCard","friend","searchData","classes","userData","setUserData","open","setOpen","online","setOnline","callingStatus","useSelector","state","call","useCreateCallMutation","createCall","useRef","useRemoveFriendMutation","removeFriend","getMoreUserDetails","useCallback","a","query","firestore","collection","doc","uid","get","userRef","data","console","unsubscribe","onSnapshot","exists","status","StyledBadge","withStyles","badge","backgroundColor","boxShadow","background","paper","dot","spacing","height","borderRadius","Badge","Paper","elevation","className","style","overlap","anchorOrigin","vertical","horizontal","variant","Avatar","alt","src","photoURL","displayName","Button","disableElevation","disabled","onClick","userOnOtherSide","Typography","fontStyle","Dialog","onClose","DialogTitle","id","DialogContent","DialogContentText","DialogActions","friendUid","autoFocus","overflow","flexDirection","searchSection","searchbar","bottom","left","smoothAnimation","textfield","border","wave","zIndex","friendsContainer","overflowY","FriendsPanel","friendPanelHeight","searchString","setSearchString","setSearchData","friendsData","friends","containerHeight","setContainerHeight","containerRef","useTheme","matches","useMediaQuery","getSearchData","results","length","i","toLowerCase","includes","push","debounceSearch","debounce","b","window","innerHeight","offsetTop","addEventListener","removeEventListener","log","friendSvgSrc","TextField","placeholder","margin","InputProps","startAdornment","InputAdornment","notchedOutline","value","onChange","e","target","map","backdropFilter","WebkitBackdropFilter","text","primary","aspectRatio","animation","controls","marginTop","TransitionLeft","props","Slide","direction","IncomingCallNotification","history","useHistory","undefined","setTransition","callingUser","setCallingUser","activeCall","isReceivingCall","dispatch","useDispatch","useAcceptCallMutation","acceptCall","isSuccess","handleClose","resetCallDetails","handleAcceptCall","setIsReceivingCall","callId","callDocId","handleDecline","callDoc","update","callDeclined","getUserFromId","snapshot","Transition","from","Snackbar","TransitionComponent","autoHideDuration","align","gutterBottom","control","minHeight","avatarImage","loading","RecentCallCard","card","cardRef","isOnScreen","cardData","setCardData","useDeleteCallMutation","deleteCall","isCaller","then","catch","handleDelete","CircularProgress","Tooltip","title","callAccepted","arrow","unit","moment","diff","timeStamp","calculateTimeDiff","SwiperCore","use","Navigation","swiperContainer","next","top","right","opacity","prev","RecentCallsContainer","currentUserUid","user","recentSentCallData","setRecentSentCallData","recentReceivedCallData","setRecentReceivedCallData","allCalls","sort","Date","unsubscribeFromSentCalls","unsubscribeFromReceivedCalls","where","sentCalls","docs","eachData","toMillis","receivedCalls","slidesPerView","freeMode","navigation","nextEl","prevEl","idx","SuggestionCard","refetch","useSendFriendRequestMutation","sendReq","friendCount","setFriendCount","sendFriendReq","vvariant","defaultHeight","SuggestionsContainer","useGetSuggestionsQuery","isError","isLoading","toast","suggestions","selectNumFriends","createSelector","maxWidth","imagePreview","imageContainer","image","profileText","detailsText","UserPanel","setFriendPanelHeight","numFriends","getBoundingClientRect","profileSvgSrc","CoinCounter","component","Divider","to","textDecoration","flexParent","leftPanel","alignSelf","middlePanel","marginLeft","Dashboard","timerRef","toastRef","activeCallDocId","clearTimer","clearTimeout","dismiss","now","getTime","unsubscribeFromFriendsCollection","unsubscribeFromCallsCollection","friendCollectionQuery","callsCollectionQuery","orderBy","setFriends","docChanges","forEach","change","type","setCallingStatus","setActiveCall","unsubscribeFromCreateCallDocument","setTimeout","callData","success"],"mappings":"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","file":"static/js/9.b2502a3b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/friendsSearchWave.3499b908.svg\";","import { useEffect, useState } from \"react\";\nconst useOnScreen = (ref) => {\n  const [isIntersecting, setIsIntersecting] = useState(false);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(([entry]) =>\n      setIsIntersecting(entry.isIntersecting)\n    );\n\n    const node = ref.current;\n    observer.observe(node);\n\n    return () => {\n      observer.unobserve(node);\n      observer.disconnect();\n    };\n  }, [ref]);\n  return isIntersecting;\n};\n\nexport default useOnScreen;\n","import {\n  Avatar,\n  Badge,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  makeStyles,\n  Paper,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport CallIcon from \"@material-ui/icons/Call\";\nimport Delete from \"@material-ui/icons/CloseOutlined\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport useOnScreen from \"../../hooks/useOnScreen\";\nimport { firestore } from \"../../lib/firebase/firebase\";\nimport { useRemoveFriendMutation } from \"../../features/friends-api/friends-api-slice\";\nimport { useCreateCallMutation } from \"../../features/call-api/call-api-slice\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    padding: \"0.5rem\",\n    marginBottom: \"1rem\",\n    position: \"relative\",\n    gap: \"0.5rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      marginBottom: \"0.5rem\",\n    },\n  },\n  name: {\n    fontSize: \"1rem\",\n    flex: 1,\n    [theme.breakpoints.down(\"sm\")]: {\n      fontSize: \"0.8rem\",\n    },\n  },\n  callIcon: {\n    transform: \"scaleX(-1)\",\n    transition: \"all 0.5s ease\",\n    cursor: \"pointer\",\n    fontSize: \"2rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      fontSize: \"1.5rem\",\n    },\n\n    \"&.call-icon\": {\n      marginRight: \"0.5rem\",\n      \"&:hover\": {\n        color: theme.palette.secondary.main,\n      },\n    },\n\n    \"&.remove-icon\": {\n      color: theme.palette.grey[600],\n      \"&:hover\": {\n        color: theme.palette.error.main,\n      },\n    },\n  },\n  noPadding: {\n    padding: 0,\n    minWidth: \"fit-content\",\n    \"&:first-child\": {\n      marginRight: \"1rem\",\n    },\n  },\n}));\n\nconst PanelFriendCard = ({ friend, searchData = false }) => {\n  const classes = useStyles();\n  const [userData, setUserData] = useState(null);\n  const [open, setOpen] = useState(false);\n  const [online, setOnline] = useState(false);\n\n  const callingStatus = useSelector((state) => state.call.callingStatus);\n  const [createCall] = useCreateCallMutation();\n\n  const ref = useRef();\n\n  const isIntersecting = useOnScreen(ref);\n\n  const [removeFriend] = useRemoveFriendMutation();\n\n  const getMoreUserDetails = useCallback(async () => {\n    if (!userData) {\n      try {\n        const query = firestore.collection(\"users\").doc(friend.uid);\n\n        const userRef = await query.get();\n\n        setUserData(userRef.data());\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }, [friend, userData]);\n\n  useEffect(() => {\n    if (isIntersecting && !searchData) {\n      getMoreUserDetails();\n    } else if (searchData) {\n      setUserData(friend);\n    }\n  }, [isIntersecting, searchData, friend, getMoreUserDetails]);\n\n  // set online offline status from status collection in firestore\n  useEffect(() => {\n    let unsubscribe;\n    if (friend?.uid) {\n      const query = firestore.collection(\"status\").doc(friend.uid);\n\n      unsubscribe = query.onSnapshot((doc) => {\n        if (doc.exists) {\n          setOnline(doc.data().status === \"online\");\n        }\n      });\n    }\n\n    return () => {\n      unsubscribe();\n    };\n  }, [friend]);\n\n  const handleCallClick = () => {\n    createCall({\n      userOnOtherSide: userData.uid,\n    });\n  };\n\n  const handleRemoveFriend = () => {\n    removeFriend({\n      friendUid: friend.uid,\n    });\n  };\n\n  const StyledBadge = withStyles((theme) => ({\n    badge: {\n      backgroundColor: online ? \"#5eff00\" : theme.palette.grey[600],\n      color: online ? \"#5eff00\" : theme.palette.grey[600],\n      boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n    },\n    dot: {\n      width: theme.spacing(1.2),\n      height: theme.spacing(1.2),\n      borderRadius: \"50%\",\n    },\n  }))(Badge);\n\n  return (\n    <Paper ref={ref} elevation={3} className={classes.root}>\n      {userData && (\n        <>\n          <StyledBadge\n            style={{\n              marginRight: \"0.5rem\",\n            }}\n            overlap=\"circular\"\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"right\",\n            }}\n            variant=\"dot\"\n          >\n            <Avatar\n              style={{ height: \"50px\", width: \"50px\" }}\n              alt={userData.name}\n              src={userData.photoURL}\n            />\n          </StyledBadge>\n          <div style={{ flex: 1 }}>\n            <div style={{ display: \"flex\", alignItems: \"center\" }}>\n              <div className={classes.name}>{userData.displayName}</div>\n              <Button\n                disableElevation\n                disabled={callingStatus}\n                className={classes.noPadding}\n                onClick={handleCallClick}\n              >\n                <CallIcon className={`${classes.callIcon} call-icon`} />\n              </Button>\n              <Button\n                onClick={() => setOpen(true)}\n                disableElevation\n                className={classes.noPadding}\n              >\n                <Delete className={`${classes.callIcon} remove-icon`} />\n              </Button>\n            </div>\n            <Typography\n              style={{ fontStyle: \"italic\" }}\n              variant=\"caption\"\n              color=\"textSecondary\"\n            >\n              \"{userData.status}\"\n            </Typography>\n          </div>\n\n          {/* confirmation dialog while removing friend */}\n          <Dialog\n            open={open}\n            onClose={() => setOpen(false)}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n          >\n            <DialogTitle id=\"alert-dialog-title\">\n              {`Are you sure to remove ${userData.displayName} from your friends?`}\n            </DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"alert-dialog-description\">\n                This action cannot be undone. Also all call history will be\n                deleted.\n              </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={() => setOpen(false)} color=\"primary\">\n                Cancel\n              </Button>\n              <Button onClick={handleRemoveFriend} color=\"secondary\" autoFocus>\n                Delete\n              </Button>\n            </DialogActions>\n          </Dialog>\n        </>\n      )}\n    </Paper>\n  );\n};\n\nexport default PanelFriendCard;\n","import {\n  InputAdornment,\n  makeStyles,\n  Paper,\n  TextField,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport GroupIcon from \"@material-ui/icons/Group\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\n\nimport friendSvgSrc from \"../../assets/friendsSearchWave.svg\";\nimport { firestore } from \"../../lib/firebase/firebase\";\nimport PanelFriendCard from \"../PanelFriendCard/PanelFriendCard\";\nimport debounce from \"lodash.debounce\";\nimport { useTheme } from \"@material-ui/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    flex: 1,\n  },\n  paper: {\n    width: \"100%\",\n    height: \"100%\",\n    overflow: \"hidden\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: theme.spacing(7),\n    [theme.breakpoints.down(\"sm\")]: {\n      justifyContent: \"space-between\",\n    },\n  },\n  searchSection: {\n    position: \"relative\",\n    background: theme.palette.secondary.main,\n    height: \"4em\",\n    width: \"100%\",\n  },\n  searchbar: {\n    position: \"absolute\",\n    bottom: 0,\n    left: \"50%\",\n    transform: \"translate(-50%, 50%)\",\n    width: \"80%\",\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"95%\",\n    },\n  },\n  smoothAnimation: {\n    borderRadius: theme.spacing(3),\n    transition: \"all 0.4s ease\",\n  },\n  textfield: {\n    background: theme.palette.background.paper,\n    borderRadius: theme.spacing(3),\n    border: `5px solid ${theme.palette.background.paper}`,\n  },\n  wave: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n    transform: \"translateY(80%)\",\n    zIndex: 0,\n  },\n\n  friendsContainer: {\n    padding: \"0 0.5rem\",\n    overflowY: \"scroll\",\n  },\n}));\n\nconst FriendsPanel = ({ friendPanelHeight }) => {\n  const classes = useStyles();\n  const [searchString, setSearchString] = useState(\"\");\n  const [searchData, setSearchData] = useState([]);\n  const friendsData = useSelector((state) => state.friends.friendsData);\n\n  const [containerHeight, setContainerHeight] = useState(0);\n  const containerRef = useRef();\n\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const getSearchData = async (searchString, friendsData) => {\n    let results = [];\n    if (searchString.length) {\n      for (let i = 0; i < friendsData.length; i++) {\n        const { uid } = friendsData[i];\n\n        const data = (\n          await firestore.collection(\"users\").doc(uid).get()\n        ).data();\n\n        if (\n          data.displayName.toLowerCase().includes(searchString.toLowerCase())\n        ) {\n          results.push(data);\n        }\n      }\n      setSearchData(results);\n    } else {\n      setSearchData([]);\n    }\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const debounceSearch = useCallback(\n    debounce((a, b) => {\n      getSearchData(a, b);\n    }, 500),\n    []\n  );\n\n  useEffect(() => {\n    debounceSearch(searchString, friendsData);\n  }, [searchString, friendsData, debounceSearch]);\n\n  useEffect(() => {\n    if (!matches && containerRef.current) {\n      setContainerHeight(\n        window.innerHeight - containerRef.current.offsetTop - 112\n      );\n    }\n\n    window.addEventListener(\"resize\", () => {\n      if (!matches && containerRef.current) {\n        setContainerHeight(\n          window.innerHeight - containerRef.current.offsetTop - 112\n        );\n      }\n    });\n\n    return () => {\n      window.removeEventListener(\"resize\", () => {\n        console.log(window.innerHeight);\n      });\n    };\n  }, [matches]);\n\n  return (\n    <div\n      style={friendPanelHeight ? { height: friendPanelHeight } : {}}\n      className={classes.root}\n    >\n      <Paper className={classes.paper} elevation={6}>\n        <div className={classes.searchSection}>\n          <img className={classes.wave} src={friendSvgSrc} alt=\"wave\" />\n          <TextField\n            className={classes.searchbar}\n            color=\"secondary\"\n            variant=\"outlined\"\n            placeholder=\"Search Friends\"\n            margin=\"dense\"\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position=\"start\">\n                  <GroupIcon color=\"inherit\" />\n                </InputAdornment>\n              ),\n              classes: {\n                notchedOutline: classes.smoothAnimation,\n                root: classes.textfield,\n              },\n              value: searchString,\n              onChange: (e) => setSearchString(e.target.value),\n            }}\n          />\n        </div>\n\n        <div\n          className={classes.friendsContainer}\n          style={{ height: matches ? \"70%\" : `${containerHeight}px` }}\n          ref={containerRef}\n        >\n          {searchData.length\n            ? searchData.map((friend) => (\n                <PanelFriendCard\n                  searchData={true}\n                  friend={friend}\n                  key={friend.uid}\n                />\n              ))\n            : friendsData.map((friend) => (\n                <PanelFriendCard friend={friend} key={friend.uid} />\n              ))}\n        </div>\n      </Paper>\n    </div>\n  );\n};\n\nexport default FriendsPanel;\n","import React, { useEffect, useState } from \"react\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport Slide from \"@material-ui/core/Slide\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  resetCallDetails,\n  setIsReceivingCall,\n} from \"../../features/call/call-slice\";\nimport { useAcceptCallMutation } from \"../../features/call-api/call-api-slice\";\nimport {\n  Avatar,\n  makeStyles,\n  Paper,\n  Typography,\n  Button,\n} from \"@material-ui/core\";\nimport { firestore } from \"../../lib/firebase/firebase\";\nimport CallIcon from \"@material-ui/icons/Call\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport { useHistory } from \"react-router\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backdropFilter: \"blur( 10px )\",\n    WebkitBackdropFilter: \"blur( 10px )\",\n    background: \"rgba(0, 0, 0, 0.3)\",\n    color: theme.palette.text.primary,\n    width: \"15rem\",\n    aspectRatio: 11 / 16,\n    padding: \"1rem\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    animation: `$myEffect 1s linear infinite alternate`,\n  },\n  controls: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    marginTop: \"auto\",\n    gap: \"1rem\",\n  },\n  \"@keyframes myEffect\": {\n    \"0%\": {\n      transform: \"translateY(0)\",\n    },\n    \"100%\": {\n      transform: \"translateY(5px)\",\n    },\n  },\n}));\n\nfunction TransitionLeft(props) {\n  return <Slide {...props} direction=\"left\" />;\n}\n\nconst IncomingCallNotification = () => {\n  const classes = useStyles();\n\n  const history = useHistory();\n\n  const [open, setOpen] = useState(false);\n  const [transition, setTransition] = useState(undefined);\n  const [callingUser, setCallingUser] = useState(null);\n\n  const activeCall = useSelector((state) => state.call.activeCall);\n  const isReceivingCall = useSelector((state) => state.call.isReceivingCall);\n  const dispatch = useDispatch();\n  const [acceptCall, { isSuccess }] = useAcceptCallMutation();\n\n  const handleClick = (Transition) => () => {\n    setTransition(() => Transition);\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    dispatch(resetCallDetails());\n    setOpen(false);\n  };\n  const handleAcceptCall = async () => {\n    setOpen(false);\n    dispatch(setIsReceivingCall(true));\n    await acceptCall({\n      callId: activeCall.callDocId,\n    });\n  };\n\n  const handleDecline = async () => {\n    const callDoc = firestore.collection(\"calls\").doc(activeCall.callDocId);\n\n    await callDoc.update({\n      callDeclined: true,\n    });\n    handleClose();\n  };\n\n  const getUserFromId = async (uid) => {\n    const query = firestore.collection(\"users\").doc(uid);\n    const snapshot = await query.get();\n    setCallingUser(snapshot.data());\n  };\n\n  useEffect(() => {\n    dispatch(resetCallDetails());\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (isSuccess && activeCall) {\n      history.push(\"/call\");\n    }\n  }, [isSuccess, activeCall, history]);\n\n  useEffect(() => {\n    if (isReceivingCall && activeCall) {\n      handleClick(TransitionLeft)();\n      getUserFromId(activeCall.from);\n    } else {\n      setCallingUser(null);\n      setOpen(false);\n    }\n  }, [isReceivingCall, activeCall]);\n\n  return (\n    <Snackbar\n      open={open}\n      onClose={handleClose}\n      TransitionComponent={transition}\n      key={transition ? transition.name : \"\"}\n      anchorOrigin={{ vertical: \"bottom\", horizontal: \"right\" }}\n      autoHideDuration={20000}\n    >\n      <Paper elevation={7} className={classes.root}>\n        <Typography variant=\"h5\" align=\"center\" gutterBottom>\n          Incoming Call\n        </Typography>\n        {callingUser && (\n          <>\n            <Avatar\n              src={callingUser.photoURL}\n              alt=\"Incoming Call Profile\"\n              style={{ height: \"7rem\", width: \"7rem\", margin: \"1rem\" }}\n            />\n            <Typography variant=\"h6\" align=\"center\" gutterBottom>\n              {callingUser.displayName}\n            </Typography>\n            <div className={classes.controls}>\n              <div className={classes.control}>\n                <Button\n                  style={{ padding: \"5px\", borderRadius: \"50%\", minWidth: 0 }}\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  onClick={handleAcceptCall}\n                >\n                  <CallIcon style={{ fontSize: \"3rem\" }} />\n                </Button>\n              </div>\n              <div className={classes.control}>\n                <Button\n                  style={{ padding: \"5px\", borderRadius: \"50%\", minWidth: 0 }}\n                  variant=\"outlined\"\n                  color=\"secondary\"\n                  onClick={handleDecline}\n                >\n                  <ClearIcon style={{ fontSize: \"3rem\" }} />\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n      </Paper>\n    </Snackbar>\n  );\n};\n\nexport default IncomingCallNotification;\n","import {\n  Avatar,\n  Button,\n  CircularProgress,\n  makeStyles,\n  Paper,\n  Typography,\n  Tooltip,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport moment from \"moment\";\nimport CallIcon from \"@material-ui/icons/Call\";\nimport ClearIcon from \"@material-ui/icons/Clear\";\nimport CallMadeIcon from \"@material-ui/icons/CallMade\";\nimport CallReceivedIcon from \"@material-ui/icons/CallReceived\";\nimport { useEffect, useRef, useState } from \"react\";\nimport useOnScreen from \"../../hooks/useOnScreen\";\nimport { firestore } from \"../../lib/firebase/firebase\";\nimport {\n  useCreateCallMutation,\n  useDeleteCallMutation,\n} from \"../../features/call-api/call-api-slice\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"11rem\",\n    minHeight: \"18rem\",\n    margin: \"1rem 0\",\n    padding: \"1rem\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: \"0.5rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      padding: \"0.5rem\",\n      minHeight: \"13rem\",\n      height: \"fit-content\",\n      width: \"7rem\",\n      gap: 0,\n    },\n  },\n  avatarImage: {\n    height: theme.spacing(12),\n    width: theme.spacing(12),\n    marginTop: \"1rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: theme.spacing(8),\n      width: theme.spacing(8),\n      margin: 0,\n      marginBottom: \"0.5rem\",\n    },\n  },\n  controls: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    marginTop: \"auto\",\n  },\n  loading: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"100%\",\n    width: \"100%\",\n  },\n}));\n\nconst RecentCallCard = ({ card }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const cardRef = useRef();\n  const isOnScreen = useOnScreen(cardRef);\n\n  const [cardData, setCardData] = useState({ displayName: \"\", photoURL: \"\" });\n\n  const [createCall] = useCreateCallMutation();\n  const [deleteCall] = useDeleteCallMutation();\n\n  useEffect(() => {\n    let unsubscribe = () => {};\n    if (isOnScreen && !cardData.displayName.length) {\n      unsubscribe = firestore\n        .collection(\"users\")\n        .doc(card.isCaller ? card.userOnOtherSide : card.from)\n        .get()\n        .then((snapshot) => {\n          const { displayName, photoURL } = snapshot.data();\n          setCardData({ displayName, photoURL });\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    }\n    return unsubscribe;\n  }, [card, isOnScreen, cardData]);\n\n  const calculateTimeDiff = () => {\n    const units = [\"year\", \"month\", \"day\", \"hour\", \"minute\", \"second\"];\n\n    for (const unit of units) {\n      if (unit) {\n        const i = moment().diff(moment(card.timeStamp), unit);\n        if (!!i) {\n          return `${i} ${unit}${i > 1 ? \"s\" : \"\"} ago`;\n        }\n      }\n    }\n  };\n\n  const handleCallClick = () => {\n    createCall({\n      userOnOtherSide: card.isCaller ? card.userOnOtherSide : card.from,\n    });\n  };\n\n  const handleDelete = async () => {\n    deleteCall({\n      callId: card.id,\n    });\n  };\n\n  const getTitle = () => {\n    return `${card.isCaller ? \"Outgoing\" : \"Incomming\"}  ${\n      card.callAccepted\n        ? \"call accepted\"\n        : card.callDeclined\n        ? \"call declined\"\n        : \"call didn't connect\"\n    }`;\n  };\n\n  return (\n    <Paper ref={cardRef} elevation={6} className={classes.root}>\n      {cardData.displayName.length === 0 ? (\n        <div className={classes.loading}>\n          <CircularProgress />\n        </div>\n      ) : (\n        <>\n          <Avatar\n            alt=\"profile\"\n            src={cardData.photoURL}\n            className={classes.avatarImage}\n          />\n          <Typography variant={!matches ? \"h6\" : \"subtitle1\"}>\n            {cardData.displayName}\n          </Typography>\n          <Tooltip title={getTitle()} arrow>\n            <Button\n              style={{\n                padding: !matches ? \"5px\" : \"2px\",\n                borderRadius: \"50%\",\n                minWidth: 0,\n              }}\n              color={\n                card.callAccepted\n                  ? \"primary\"\n                  : card.callDeclined\n                  ? \"secondary\"\n                  : \"default\"\n              }\n              disableElevation={!card.callAccepted && !card.callDeclined}\n            >\n              {card.isCaller ? <CallMadeIcon /> : <CallReceivedIcon />}\n            </Button>\n          </Tooltip>\n          <Typography color=\"textSecondary\" variant=\"subtitle2\">\n            {calculateTimeDiff()}\n          </Typography>\n\n          <div className={classes.controls}>\n            <div className={classes.control}>\n              <Button\n                style={{\n                  padding: !matches ? \"5px\" : \"2px\",\n                  borderRadius: \"50%\",\n                  minWidth: 0,\n                }}\n                variant=\"outlined\"\n                color=\"primary\"\n                onClick={handleCallClick}\n              >\n                <CallIcon style={{ fontSize: !matches ? \"2rem\" : \"1.5rem\" }} />\n              </Button>\n            </div>\n            <div className={classes.control}>\n              <Button\n                style={{\n                  padding: !matches ? \"5px\" : \"2px\",\n                  borderRadius: \"50%\",\n                  minWidth: 0,\n                }}\n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={handleDelete}\n              >\n                <ClearIcon style={{ fontSize: !matches ? \"2rem\" : \"1.5rem\" }} />\n              </Button>\n            </div>\n          </div>\n        </>\n      )}\n    </Paper>\n  );\n};\n\nexport default RecentCallCard;\n","import RecentCallCard from \"../RecentCallCard/RecentCallCard\";\nimport { makeStyles, Typography } from \"@material-ui/core\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport SwiperCore, { Navigation } from \"swiper/core\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport \"swiper/swiper.min.css\";\nimport \"swiper/components/navigation/navigation.min.css\";\nimport { useEffect, useState } from \"react\";\nimport { firestore } from \"../../lib/firebase/firebase\";\nimport { useSelector } from \"react-redux\";\n\nSwiperCore.use([Navigation]);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    overflow: \"hidden\",\n    marginBottom: \"4rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      marginBottom: \"1rem\",\n    },\n  },\n  swiperContainer: {\n    width: \"100%\",\n    position: \"relative\",\n  },\n  next: {\n    position: \"absolute\",\n    top: \"50%\",\n    right: 0,\n    transform: \"translate(0, -50%)\",\n    zIndex: 10,\n    cursor: \"pointer\",\n    opacity: 0.2,\n    transition: \"all 0.3s ease\",\n\n    \"&:hover\": {\n      opacity: 1,\n      transform: \"translate(0, -50%) scale(1.2)\",\n    },\n  },\n  prev: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: 0,\n    transform: \"translate(0, -50%)\",\n    zIndex: 10,\n    cursor: \"pointer\",\n    opacity: 0.2,\n    transition: \"all 0.3s ease\",\n\n    \"&:hover\": {\n      opacity: 1,\n      transform: \"translate(0, -50%) scale(1.2)\",\n    },\n  },\n}));\n\nconst RecentCallsContainer = () => {\n  const classes = useStyles();\n\n  const currentUserUid = useSelector((state) => state.user.userData.uid);\n\n  const [recentSentCallData, setRecentSentCallData] = useState([]);\n  const [recentReceivedCallData, setRecentReceivedCallData] = useState([]);\n\n  const allCalls = [...recentSentCallData, ...recentReceivedCallData].sort(\n    (a, b) => {\n      return new Date(b.timeStamp) - new Date(a.timeStamp);\n    }\n  );\n\n  useEffect(() => {\n    let unsubscribeFromSentCalls = () => {};\n    let unsubscribeFromReceivedCalls = () => {};\n\n    if (currentUserUid) {\n      unsubscribeFromSentCalls = firestore\n        .collection(\"calls\")\n        .where(\"from\", \"==\", currentUserUid)\n        .onSnapshot((snapshot) => {\n          let sentCalls = snapshot.docs\n            .map((doc) => ({ ...doc.data(), id: doc.id }))\n            .map((eachData) => ({\n              ...eachData,\n              timeStamp: eachData?.timeStamp?.toMillis(),\n              isCaller: true,\n            }));\n          setRecentSentCallData(sentCalls);\n        });\n\n      unsubscribeFromReceivedCalls = firestore\n        .collection(\"calls\")\n        .where(\"userOnOtherSide\", \"==\", currentUserUid)\n        .onSnapshot((snapshot) => {\n          let receivedCalls = snapshot.docs\n            .map((doc) => ({ ...doc.data(), id: doc.id }))\n            .map((eachData) => ({\n              ...eachData,\n              timeStamp: eachData?.timeStamp?.toMillis(),\n              isCaller: false,\n            }));\n\n          setRecentReceivedCallData(receivedCalls);\n        });\n    }\n\n    return () => {\n      unsubscribeFromSentCalls();\n      unsubscribeFromReceivedCalls();\n    };\n  }, [currentUserUid]);\n\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"h5\" gutterBottom>\n        Recent Calls\n      </Typography>\n\n      <div className={classes.swiperContainer}>\n        {allCalls.length ? (\n          <>\n            <div className={`${classes.next} next`}>\n              <PlayCircleFilledIcon fontSize=\"large\" />\n            </div>\n            <div className={`${classes.prev} prev`}>\n              <PlayCircleFilledIcon\n                style={{ transform: \"scale(-1)\" }}\n                fontSize=\"large\"\n              />\n            </div>{\" \"}\n            <Swiper\n              slidesPerView={1}\n              freeMode={true}\n              navigation={{ nextEl: \".next\", prevEl: \".prev\" }}\n              className=\"mySwiper\"\n              breakpoints={{\n                150: {\n                  slidesPerView: 1,\n                },\n                300: {\n                  slidesPerView: 2,\n                },\n                500: {\n                  slidesPerView: 3,\n                },\n                620: {\n                  slidesPerView: 4,\n                },\n                900: {\n                  slidesPerView: 5,\n                },\n                960: {\n                  slidesPerView: 2,\n                },\n                1100: {\n                  slidesPerView: 3,\n                },\n                1300: {\n                  slidesPerView: 4,\n                },\n                1500: {\n                  slidesPerView: 5,\n                },\n                1700: {\n                  slidesPerView: 6,\n                },\n                1900: {\n                  slidesPerView: 7,\n                },\n                2100: {\n                  slidesPerView: 8,\n                },\n              }}\n            >\n              {allCalls.map((card, idx) => (\n                <SwiperSlide\n                  style={{ transform: \"translateX(1.6rem)\" }}\n                  key={idx}\n                >\n                  <RecentCallCard card={card} />\n                </SwiperSlide>\n              ))}\n            </Swiper>\n          </>\n        ) : (\n          <>\n            <Typography\n              variant=\"h4\"\n              align=\"center\"\n              color=\"textSecondary\"\n              gutterBottom\n            >\n              Your recent calls will appear here\n            </Typography>\n            <Typography variant=\"h6\" align=\"center\" color=\"textSecondary\">\n              Make calls to your friends from the bottom left panel.\n            </Typography>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RecentCallsContainer;\n","import {\n  Avatar,\n  Button,\n  CircularProgress,\n  makeStyles,\n  Paper,\n  Typography,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport GroupAddIcon from \"@material-ui/icons/GroupAdd\";\nimport { useRef, useEffect, useState } from \"react\";\nimport { useSendFriendRequestMutation } from \"../../features/friends-api/friends-api-slice\";\nimport useOnScreen from \"../../hooks/useOnScreen\";\nimport { firestore } from \"../../lib/firebase/firebase\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"11rem\",\n    minHeight: \"18rem\",\n    margin: \"1rem 0\",\n    padding: \"1rem\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: \"0.5rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      padding: \"0.5rem\",\n      minHeight: \"13rem\",\n      height: \"fit-content\",\n      width: \"7rem\",\n      gap: 0,\n    },\n  },\n  avatarImage: {\n    height: theme.spacing(12),\n    width: theme.spacing(12),\n    marginTop: \"1rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: theme.spacing(8),\n      width: theme.spacing(8),\n      margin: 0,\n      marginBottom: \"0.5rem\",\n    },\n  },\n  friends: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    alignItems: \"center\",\n  },\n  loading: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    height: \"100%\",\n    width: \"100%\",\n    flex: 1,\n  },\n}));\n\nconst SuggestionCard = ({ uid, refetch }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const cardRef = useRef();\n  const [sendReq] = useSendFriendRequestMutation();\n\n  const isOnScreen = useOnScreen(cardRef);\n  const [cardData, setCardData] = useState({\n    displayName: \"\",\n    photoURL: \"\",\n    status: \"\",\n  });\n  const [friendCount, setFriendCount] = useState(0);\n\n  useEffect(() => {\n    if (isOnScreen) {\n      firestore\n        .collection(\"users\")\n        .doc(uid)\n        .get()\n        .then((snapshot) => {\n          setCardData(snapshot.data());\n        });\n\n      firestore\n        .collection(\"users\")\n        .doc(uid)\n        .collection(\"friends\")\n        .get()\n        .then((snapshot) => {\n          setFriendCount(snapshot.docs.length);\n        });\n    }\n  }, [isOnScreen, uid]);\n\n  // helper functions\n  const sendFriendReq = async () => {\n    await sendReq({\n      friendUid: uid,\n    });\n    refetch();\n  };\n  return (\n    <Paper ref={cardRef} elevation={6} className={classes.root}>\n      <Avatar\n        alt=\"profile\"\n        src={cardData.photoURL}\n        className={classes.avatarImage}\n      />\n      {cardData.displayName.length ? (\n        <>\n          <Typography variant={!matches ? \"h6\" : \"subtitle1\"}>\n            {cardData.displayName}\n          </Typography>\n          <div className={classes.friends}>\n            <Typography\n              variant={!matches ? \"subtitle1\" : \"caption\"}\n              color=\"textSecondary\"\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                gap: \"0.5rem\",\n              }}\n            >\n              Friends:{\" \"}\n              <Typography\n                vvariant={!matches ? \"subtitle1\" : \"caption\"}\n                color=\"textPrimary\"\n                style={{ display: \"inline-block\" }}\n              >\n                {friendCount}\n              </Typography>\n            </Typography>\n            <Button\n              style={{\n                padding: !matches ? \"5px\" : \"2px\",\n                minWidth: 0,\n              }}\n              variant=\"outlined\"\n              color=\"primary\"\n              onClick={sendFriendReq}\n            >\n              <GroupAddIcon />\n            </Button>\n          </div>\n          <Typography\n            style={{ fontStyle: \"italic\", marginTop: \"1.5rem\" }}\n            color=\"textSecondary\"\n            variant={!matches ? \"subtitle1\" : \"caption\"}\n            align=\"center\"\n          >\n            \"{cardData.status}\"\n          </Typography>\n        </>\n      ) : (\n        <div className={classes.loading}>\n          <CircularProgress />\n        </div>\n      )}\n    </Paper>\n  );\n};\n\nexport default SuggestionCard;\n","import SuggestionCard from \"../SuggestionCard/SuggestionCard\";\nimport { CircularProgress, makeStyles, Typography } from \"@material-ui/core\";\nimport { Swiper, SwiperSlide } from \"swiper/react\";\nimport SwiperCore, { Navigation } from \"swiper/core\";\nimport PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\nimport \"swiper/swiper.min.css\";\nimport \"swiper/components/navigation/navigation.min.css\";\nimport { useGetSuggestionsQuery } from \"../../features/suggestions-api/suggestions-api-slice\";\nimport { useEffect } from \"react\";\nimport toast from \"react-hot-toast\";\n\nSwiperCore.use([Navigation]);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    overflow: \"hidden\",\n    marginBottom: \"4rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      marginBottom: \"1rem\",\n    },\n  },\n  swiperContainer: {\n    width: \"100%\",\n    position: \"relative\",\n  },\n  next: {\n    position: \"absolute\",\n    top: \"50%\",\n    right: 0,\n    transform: \"translate(0, -50%)\",\n    zIndex: 10,\n    cursor: \"pointer\",\n    opacity: 0.2,\n    transition: \"all 0.3s ease\",\n\n    \"&:hover\": {\n      opacity: 1,\n      transform: \"translate(0, -50%) scale(1.2)\",\n    },\n  },\n  prev: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: 0,\n    transform: \"translate(0, -50%)\",\n    zIndex: 10,\n    cursor: \"pointer\",\n    opacity: 0.2,\n    transition: \"all 0.3s ease\",\n\n    \"&:hover\": {\n      opacity: 1,\n      transform: \"translate(0, -50%) scale(1.2)\",\n    },\n  },\n  defaultHeight: {\n    width: \"100%\",\n    height: \"18rem\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n}));\n\nconst SuggestionsContainer = () => {\n  const classes = useStyles();\n\n  const { data, isError, isLoading, refetch } = useGetSuggestionsQuery();\n  console.log(useGetSuggestionsQuery());\n  useEffect(() => {\n    if (isError) {\n      toast.error(\"Error Fetching Suggestions!!\");\n    }\n  }, [isError]);\n\n  return (\n    <div className={classes.root}>\n      <Typography variant=\"h5\" gutterBottom>\n        Suggestions\n      </Typography>\n\n      {isLoading ? (\n        <div className={classes.defaultHeight}>\n          <CircularProgress />\n        </div>\n      ) : data?.suggestions.length ? (\n        <div className={classes.swiperContainer}>\n          <div className={`${classes.next} next2`}>\n            <PlayCircleFilledIcon fontSize=\"large\" />\n          </div>\n          <div className={`${classes.prev} prev2`}>\n            <PlayCircleFilledIcon\n              style={{ transform: \"scale(-1)\" }}\n              fontSize=\"large\"\n            />\n          </div>\n          <Swiper\n            slidesPerView={1}\n            freeMode={true}\n            navigation={{ nextEl: \".next2\", prevEl: \".prev2\" }}\n            className=\"mySwiper\"\n            breakpoints={{\n              150: {\n                slidesPerView: 1,\n              },\n              300: {\n                slidesPerView: 2,\n              },\n              500: {\n                slidesPerView: 3,\n              },\n              620: {\n                slidesPerView: 4,\n              },\n              900: {\n                slidesPerView: 5,\n              },\n              960: {\n                slidesPerView: 2,\n              },\n              1100: {\n                slidesPerView: 3,\n              },\n              1300: {\n                slidesPerView: 4,\n              },\n              1500: {\n                slidesPerView: 5,\n              },\n              1700: {\n                slidesPerView: 6,\n              },\n              1900: {\n                slidesPerView: 7,\n              },\n              2100: {\n                slidesPerView: 8,\n              },\n            }}\n          >\n            {data.suggestions.map((uid, idx) => (\n              <SwiperSlide\n                style={{ transform: \"translateX(1.6rem)\" }}\n                key={idx}\n              >\n                <SuggestionCard refetch={refetch} uid={uid} />\n              </SwiperSlide>\n            ))}\n          </Swiper>\n        </div>\n      ) : (\n        <div className={classes.defaultHeight}>\n          <Typography\n            variant=\"h4\"\n            align=\"center\"\n            color=\"textSecondary\"\n            gutterBottom\n          >\n            No suggestions for you at the moment\n          </Typography>\n          <Typography variant=\"h6\" align=\"center\" color=\"textSecondary\">\n            Looks like you are an early user of the the platform. Welcome!\n          </Typography>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SuggestionsContainer;\n","export default __webpack_public_path__ + \"static/media/profileWave.8aa86d13.svg\";","import { createSelector } from \"@reduxjs/toolkit\";\n\nconst selectFriends = (state) => state.friends;\n\nexport const selectNumFriends = createSelector(\n  [selectFriends],\n  (friends) => friends.friendsData.length\n);\n","import {\n  Avatar,\n  makeStyles,\n  Paper,\n  Typography,\n  Badge,\n  withStyles,\n  Divider,\n  useMediaQuery,\n  useTheme,\n} from \"@material-ui/core\";\nimport { useEffect, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport profileSvgSrc from \"../../assets/profileWave.svg\";\nimport { selectNumFriends } from \"../../features/friends/friends-selector\";\nimport CoinCounter from \"../CoinCounter/CoinCounter\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    position: \"relative\",\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"unset\",\n      minWidth: \"8rem\",\n      maxWidth: \"8rem\",\n    },\n  },\n  paper: {\n    width: \"100%\",\n    overflow: \"hidden\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: \"100%\",\n      overflowY: \"scroll\",\n    },\n  },\n  imagePreview: {\n    position: \"relative\",\n    background: theme.palette.primary.main,\n    height: \"7rem\",\n    width: \"100%\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: \"3rem\",\n    },\n  },\n\n  wave: {\n    position: \"absolute\",\n    bottom: 0,\n    width: \"100%\",\n    transform: \"translateY(70%)\",\n  },\n  imageContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: \"50%\",\n    transform: \"translate(-50%, 50%)\",\n    borderRadius: \"50%\",\n    border: `5px solid ${theme.palette.background.paper}`,\n  },\n  image: {\n    height: theme.spacing(17),\n    width: theme.spacing(17),\n    [theme.breakpoints.down(\"sm\")]: {\n      height: theme.spacing(10),\n      width: theme.spacing(10),\n    },\n  },\n  profileText: {\n    marginTop: theme.spacing(10),\n    marginBottom: theme.spacing(2),\n    [theme.breakpoints.down(\"sm\")]: {\n      marginTop: theme.spacing(6),\n      marginBottom: theme.spacing(2),\n    },\n  },\n  detailsText: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n    [theme.breakpoints.down(\"sm\")]: {\n      margin: 0,\n\n      \"&.profileLink\": {\n        margin: theme.spacing(1),\n      },\n    },\n  },\n}));\n\nconst StyledBadge = withStyles((theme) => ({\n  badge: {\n    backgroundColor: \"#44b700\",\n    color: \"#44b700\",\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\n  },\n  dot: {\n    width: theme.spacing(2),\n    height: theme.spacing(2),\n    borderRadius: \"50%\",\n  },\n}))(Badge);\n\nconst UserPanel = ({ setFriendPanelHeight }) => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const matches = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n  const {\n    userData: { displayName, status, photoURL },\n  } = useSelector((state) => state.user);\n\n  const numFriends = useSelector(selectNumFriends);\n\n  const containerRef = useRef(null);\n\n  // setting the height of container based on user profile card\n  useEffect(() => {\n    if (matches) {\n      const height = containerRef.current?.getBoundingClientRect().height;\n      setFriendPanelHeight(height);\n      window.addEventListener(\"resize\", () => {\n        const height = containerRef.current?.getBoundingClientRect().height;\n        setFriendPanelHeight(height);\n      });\n    } else {\n      setFriendPanelHeight(null);\n    }\n\n    return () => {\n      window.removeEventListener(\"resize\", () => {});\n    };\n  }, [matches, setFriendPanelHeight]);\n\n  return (\n    <div ref={containerRef} className={classes.root}>\n      <Paper className={classes.paper} elevation={6}>\n        <div className={classes.imagePreview}>\n          <img className={classes.wave} src={profileSvgSrc} alt=\"wave\" />\n          <div className={classes.imageContainer}>\n            <StyledBadge\n              overlap=\"circular\"\n              anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"right\",\n              }}\n              variant=\"dot\"\n            >\n              <Avatar className={classes.image} alt=\"photo\" src={photoURL} />\n            </StyledBadge>\n          </div>\n        </div>\n        <div className={classes.profileText}>\n          <CoinCounter />\n          <Typography\n            gutterBottom\n            variant={!matches ? \"h5\" : \"subtitle1\"}\n            align=\"center\"\n          >\n            {displayName}\n          </Typography>\n          <Typography\n            variant={!matches ? \"subtitle2\" : \"caption\"}\n            align=\"center\"\n            component=\"div\"\n            color=\"textSecondary\"\n            style={{ fontStyle: \"italic\" }}\n          >\n            \"{status}\"\n          </Typography>\n        </div>\n\n        <Divider />\n\n        <div className={classes.detailsText}>\n          <Typography\n            gutterBottom\n            variant={!matches ? \"h5\" : \"subtitle1\"}\n            align=\"center\"\n            color=\"textSecondary\"\n          >\n            Friends\n          </Typography>\n          <Typography\n            gutterBottom\n            variant={!matches ? \"h5\" : \"subtitle1\"}\n            align=\"center\"\n            color=\"textPrimary\"\n          >\n            {numFriends}\n          </Typography>\n        </div>\n\n        <Divider />\n\n        <div className={`${classes.detailsText} profileLink`}>\n          <Link to=\"/profile\">\n            <Typography\n              variant=\"subtitle2\"\n              align=\"center\"\n              component=\"div\"\n              color=\"primary\"\n              style={{ textDecoration: \"underline\" }}\n            >\n              View Profile\n            </Typography>\n          </Link>\n        </div>\n      </Paper>\n    </div>\n  );\n};\n\nexport default UserPanel;\n","import { makeStyles } from \"@material-ui/core\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport FriendsPanel from \"../components/FriendsPanel/FriendsPanel\";\nimport IncomingCallNotification from \"../components/IncomingCallNotification/IncomingCallNotification\";\nimport RecentCallsContainer from \"../components/RecentCallsContainer/RecentCallsContainer\";\nimport SuggestionsContainer from \"../components/SuggestionsContainer/SuggestionsContainer\";\n\nimport UserPanel from \"../components/UserPanel/UserPanel\";\nimport {\n  resetCallDetails,\n  setActiveCall,\n  setCallingStatus,\n  setIsReceivingCall,\n} from \"../features/call/call-slice\";\nimport { setFriends } from \"../features/friends/friends-slice\";\nimport { firestore } from \"../lib/firebase/firebase\";\nimport toast from \"react-hot-toast\";\nimport { useHistory } from \"react-router-dom\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: { flex: 1, display: \"flex\", position: \"relative\" },\n  flexParent: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    width: \"100%\",\n    marginTop: \"7rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      gap: \"1rem\",\n    },\n  },\n  leftPanel: {\n    width: \"18rem\",\n    height: \"87vh\",\n    alignSelf: \"flex-start\",\n    position: \"fixed\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n    gap: \"1rem\",\n    [theme.breakpoints.down(\"sm\")]: {\n      position: \"unset\",\n      width: \"100%\",\n      flexDirection: \"row\",\n      height: \"unset\",\n      gap: \"0.5rem\",\n      alignItems: \"flex-start\",\n    },\n  },\n\n  middlePanel: {\n    flex: 1,\n    marginLeft: \"20rem\",\n    width: \"calc(100% - 20rem)\",\n\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n      marginLeft: 0,\n    },\n  },\n}));\n\nconst Dashboard = () => {\n  const classes = useStyles();\n\n  // local States\n  const [friendPanelHeight, setFriendPanelHeight] = useState(0);\n\n  // Refs\n  const timerRef = useRef();\n  const toastRef = useRef();\n\n  // Redux\n  const uid = useSelector((state) => state.user.userData.uid);\n  const activeCallDocId = useSelector((state) => state.call.activeCallDocId);\n  const dispatch = useDispatch();\n\n  // React-Router\n  const history = useHistory();\n\n  // reset timer\n  const clearTimer = () => {\n    if (timerRef.current) {\n      clearTimeout(timerRef.current);\n      timerRef.current = null;\n    }\n    if (toastRef.current) {\n      toast.dismiss(toastRef.current);\n      toastRef.current = null;\n    }\n  };\n\n  // start listenning to various collectoins related to user for realtime update and update redux store\n  useEffect(() => {\n    const now = new Date().getTime();\n\n    let unsubscribeFromFriendsCollection = () => {},\n      unsubscribeFromCallsCollection = () => {};\n    if (uid) {\n      const friendCollectionQuery = firestore\n        .collection(\"users\")\n        .doc(uid)\n        .collection(\"friends\");\n\n      const callsCollectionQuery = firestore\n        .collection(\"calls\")\n        .where(\"userOnOtherSide\", \"==\", uid)\n        .orderBy(\"timeStamp\", \"asc\");\n\n      unsubscribeFromFriendsCollection = friendCollectionQuery.onSnapshot(\n        (snapshot) => {\n          const friends = snapshot.docs.map((doc) => doc.data());\n          dispatch(setFriends(friends));\n        }\n      );\n\n      unsubscribeFromCallsCollection = callsCollectionQuery.onSnapshot(\n        (snapshot) => {\n          snapshot.docChanges().forEach((change) => {\n            const data = change.doc.data();\n            if (change.type === \"added\" && data?.timeStamp?.toMillis() > now) {\n              clearTimer();\n              dispatch(setCallingStatus(true));\n              dispatch(setIsReceivingCall(true));\n              dispatch(\n                setActiveCall({\n                  ...data,\n                  timeStamp: data.timeStamp.toMillis(),\n                  callDocId: change.doc.id,\n                })\n              );\n            }\n          });\n        }\n      );\n    }\n    return () => {\n      unsubscribeFromFriendsCollection();\n      unsubscribeFromCallsCollection();\n    };\n  }, [uid, dispatch]);\n\n  // start listenning to if call is being accepted\n  useEffect(() => {\n    let unsubscribeFromCreateCallDocument;\n    if (activeCallDocId) {\n      // create a loading toast for calling\n      toastRef.current = toast.loading(\"Calling...\", {\n        position: \"bottom-center\",\n      });\n\n      // set a timeout for 25 secs to reset the call\n      timerRef.current = setTimeout(() => {\n        clearTimer();\n        dispatch(resetCallDetails());\n\n        toast.error(\"Call Timed Out\");\n      }, 25000);\n\n      dispatch(setCallingStatus(true));\n\n      unsubscribeFromCreateCallDocument = firestore\n        .collection(\"calls\")\n        .doc(activeCallDocId)\n        .onSnapshot((snapshot) => {\n          const callData = snapshot.data();\n          const { callAccepted, callDeclined } = callData;\n\n          if (callAccepted) {\n            clearTimer();\n\n            toast.success(\"Connecting Call\");\n            dispatch(\n              setActiveCall({\n                ...callData,\n                callDocId: activeCallDocId,\n                timeStamp: callData.timeStamp.toMillis(),\n              })\n            );\n            history.push(\"/call\");\n          }\n\n          if (callDeclined) {\n            clearTimer();\n\n            dispatch(resetCallDetails());\n            toast.error(\"Call Declined\");\n          }\n        });\n    } else {\n      clearTimer();\n      dispatch(resetCallDetails());\n    }\n\n    return () => {\n      unsubscribeFromCreateCallDocument && unsubscribeFromCreateCallDocument();\n    };\n  }, [activeCallDocId, dispatch, history]);\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.flexParent}>\n        <div className={classes.leftPanel}>\n          <UserPanel setFriendPanelHeight={setFriendPanelHeight} />\n          <FriendsPanel friendPanelHeight={friendPanelHeight} />\n        </div>\n        <div className={classes.middlePanel}>\n          <RecentCallsContainer />\n          <SuggestionsContainer />\n        </div>\n      </div>\n      <IncomingCallNotification />\n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"sourceRoot":""}