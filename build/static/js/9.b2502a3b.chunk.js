(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[9],{470:function(e,t,n){"use strict";n.r(t);var a=n(25),i=n(8),r=n(14),c=n(150),o=n(0),s=n(19),l=n(11),d=n.n(l),u=n(24),b=n(305),j=n(116),m=n(155),p=n(303),f=n(185),h=n.n(f),O=n.p+"static/media/friendsSearchWave.3499b908.svg",g=n(23),x=n(6),v=n(157),w=n(317),y=n(95),S=n(141),k=n(260),N=n(311),C=n(312),P=n(313),I=n(314),D=n(338),R=n.n(D),E=n(426),V=n.n(E),z=function(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){var t=new IntersectionObserver((function(e){var t=Object(i.a)(e,1)[0];return r(t.isIntersecting)})),n=e.current;return t.observe(n),function(){t.unobserve(n),t.disconnect()}}),[e]),a},B=n(78),T=n(122),L=n(4),F=Object(c.a)((function(e){var t;return{root:Object(r.a)({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",marginBottom:"1rem",position:"relative",gap:"0.5rem"},e.breakpoints.down("sm"),{marginBottom:"0.5rem"}),name:Object(r.a)({fontSize:"1rem",flex:1},e.breakpoints.down("sm"),{fontSize:"0.8rem"}),callIcon:(t={transform:"scaleX(-1)",transition:"all 0.5s ease",cursor:"pointer",fontSize:"2rem"},Object(r.a)(t,e.breakpoints.down("sm"),{fontSize:"1.5rem"}),Object(r.a)(t,"&.call-icon",{marginRight:"0.5rem","&:hover":{color:e.palette.secondary.main}}),Object(r.a)(t,"&.remove-icon",{color:e.palette.grey[600],"&:hover":{color:e.palette.error.main}}),t),noPadding:{padding:0,minWidth:"fit-content","&:first-child":{marginRight:"1rem"}}}})),H=function(e){var t=e.friend,n=e.searchData,a=void 0!==n&&n,r=F(),c=Object(o.useState)(null),l=Object(i.a)(c,2),b=l[0],m=l[1],p=Object(o.useState)(!1),f=Object(i.a)(p,2),h=f[0],O=f[1],D=Object(o.useState)(!1),E=Object(i.a)(D,2),H=E[0],W=E[1],U=Object(s.useSelector)((function(e){return e.call.callingStatus})),A=Object(T.c)(),M=Object(i.a)(A,1)[0],Y=Object(o.useRef)(),X=z(Y),J=Object(B.d)(),$=Object(i.a)(J,1)[0],q=Object(o.useCallback)(Object(u.a)(d.a.mark((function e(){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=12;break}return e.prev=1,n=g.b.collection("users").doc(t.uid),e.next=5,n.get();case 5:a=e.sent,m(a.data()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[t,b]);Object(o.useEffect)((function(){X&&!a?q():a&&m(t)}),[X,a,t,q]),Object(o.useEffect)((function(){var e;if(null===t||void 0===t?void 0:t.uid){var n=g.b.collection("status").doc(t.uid);e=n.onSnapshot((function(e){e.exists&&W("online"===e.data().status)}))}return function(){e()}}),[t]);var G=Object(x.a)((function(e){return{badge:{backgroundColor:H?"#5eff00":e.palette.grey[600],color:H?"#5eff00":e.palette.grey[600],boxShadow:"0 0 0 2px ".concat(e.palette.background.paper)},dot:{width:e.spacing(1.2),height:e.spacing(1.2),borderRadius:"50%"}}}))(v.a);return Object(L.jsx)(j.a,{ref:Y,elevation:3,className:r.root,children:b&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(G,{style:{marginRight:"0.5rem"},overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(L.jsx)(w.a,{style:{height:"50px",width:"50px"},alt:b.name,src:b.photoURL})}),Object(L.jsxs)("div",{style:{flex:1},children:[Object(L.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(L.jsx)("div",{className:r.name,children:b.displayName}),Object(L.jsx)(y.a,{disableElevation:!0,disabled:U,className:r.noPadding,onClick:function(){M({userOnOtherSide:b.uid})},children:Object(L.jsx)(R.a,{className:"".concat(r.callIcon," call-icon")})}),Object(L.jsx)(y.a,{onClick:function(){return O(!0)},disableElevation:!0,className:r.noPadding,children:Object(L.jsx)(V.a,{className:"".concat(r.callIcon," remove-icon")})})]}),Object(L.jsxs)(S.a,{style:{fontStyle:"italic"},variant:"caption",color:"textSecondary",children:['"',b.status,'"']})]}),Object(L.jsxs)(k.a,{open:h,onClose:function(){return O(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(N.a,{id:"alert-dialog-title",children:"Are you sure to remove ".concat(b.displayName," from your friends?")}),Object(L.jsx)(C.a,{children:Object(L.jsx)(P.a,{id:"alert-dialog-description",children:"This action cannot be undone. Also all call history will be deleted."})}),Object(L.jsxs)(I.a,{children:[Object(L.jsx)(y.a,{onClick:function(){return O(!1)},color:"primary",children:"Cancel"}),Object(L.jsx)(y.a,{onClick:function(){$({friendUid:t.uid})},color:"secondary",autoFocus:!0,children:"Delete"})]})]})]})})},W=n(174),U=n.n(W),A=n(140),M=Object(c.a)((function(e){return{root:{width:"100%",flex:1},paper:Object(r.a)({width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",gap:e.spacing(7)},e.breakpoints.down("sm"),{justifyContent:"space-between"}),searchSection:{position:"relative",background:e.palette.secondary.main,height:"4em",width:"100%"},searchbar:Object(r.a)({position:"absolute",bottom:0,left:"50%",transform:"translate(-50%, 50%)",width:"80%"},e.breakpoints.down("sm"),{width:"95%"}),smoothAnimation:{borderRadius:e.spacing(3),transition:"all 0.4s ease"},textfield:{background:e.palette.background.paper,borderRadius:e.spacing(3),border:"5px solid ".concat(e.palette.background.paper)},wave:{position:"absolute",bottom:0,width:"100%",transform:"translateY(80%)",zIndex:0},friendsContainer:{padding:"0 0.5rem",overflowY:"scroll"}}})),Y=function(e){var t=e.friendPanelHeight,n=M(),a=Object(o.useState)(""),r=Object(i.a)(a,2),c=r[0],l=r[1],f=Object(o.useState)([]),x=Object(i.a)(f,2),v=x[0],w=x[1],y=Object(s.useSelector)((function(e){return e.friends.friendsData})),S=Object(o.useState)(0),k=Object(i.a)(S,2),N=k[0],C=k[1],P=Object(o.useRef)(),I=Object(A.a)(),D=Object(b.a)(I.breakpoints.down("sm")),R=function(){var e=Object(u.a)(d.a.mark((function e(t,n){var a,i,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],!t.length){e.next=15;break}i=0;case 3:if(!(i<n.length)){e.next=12;break}return r=n[i].uid,e.next=7,g.b.collection("users").doc(r).get();case 7:(c=e.sent.data()).displayName.toLowerCase().includes(t.toLowerCase())&&a.push(c);case 9:i++,e.next=3;break;case 12:w(a),e.next=16;break;case 15:w([]);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=Object(o.useCallback)(U()((function(e,t){R(e,t)}),500),[]);return Object(o.useEffect)((function(){E(c,y)}),[c,y,E]),Object(o.useEffect)((function(){return!D&&P.current&&C(window.innerHeight-P.current.offsetTop-112),window.addEventListener("resize",(function(){!D&&P.current&&C(window.innerHeight-P.current.offsetTop-112)})),function(){window.removeEventListener("resize",(function(){console.log(window.innerHeight)}))}}),[D]),Object(L.jsx)("div",{style:t?{height:t}:{},className:n.root,children:Object(L.jsxs)(j.a,{className:n.paper,elevation:6,children:[Object(L.jsxs)("div",{className:n.searchSection,children:[Object(L.jsx)("img",{className:n.wave,src:O,alt:"wave"}),Object(L.jsx)(m.a,{className:n.searchbar,color:"secondary",variant:"outlined",placeholder:"Search Friends",margin:"dense",InputProps:{startAdornment:Object(L.jsx)(p.a,{position:"start",children:Object(L.jsx)(h.a,{color:"inherit"})}),classes:{notchedOutline:n.smoothAnimation,root:n.textfield},value:c,onChange:function(e){return l(e.target.value)}}})]}),Object(L.jsx)("div",{className:n.friendsContainer,style:{height:D?"70%":"".concat(N,"px")},ref:P,children:v.length?v.map((function(e){return Object(L.jsx)(H,{searchData:!0,friend:e},e.uid)})):y.map((function(e){return Object(L.jsx)(H,{friend:e},e.uid)}))})]})})},X=n(464),J=n(463),$=n(121),q=n(409),G=n.n(q),K=n(37),Q=Object(c.a)((function(e){return{root:{backdropFilter:"blur( 10px )",WebkitBackdropFilter:"blur( 10px )",background:"rgba(0, 0, 0, 0.3)",color:e.palette.text.primary,width:"15rem",aspectRatio:11/16,padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center",animation:"$myEffect 1s linear infinite alternate"},controls:{display:"flex",justifyContent:"center",width:"100%",marginTop:"auto",gap:"1rem"},"@keyframes myEffect":{"0%":{transform:"translateY(0)"},"100%":{transform:"translateY(5px)"}}}}));function Z(e){return Object(L.jsx)(J.a,Object(a.a)(Object(a.a)({},e),{},{direction:"left"}))}var _=function(){var e=Q(),t=Object(K.g)(),n=Object(o.useState)(!1),a=Object(i.a)(n,2),r=a[0],c=a[1],l=Object(o.useState)(void 0),b=Object(i.a)(l,2),m=b[0],p=b[1],f=Object(o.useState)(null),h=Object(i.a)(f,2),O=h[0],x=h[1],v=Object(s.useSelector)((function(e){return e.call.activeCall})),k=Object(s.useSelector)((function(e){return e.call.isReceivingCall})),N=Object(s.useDispatch)(),C=Object(T.b)(),P=Object(i.a)(C,2),I=P[0],D=P[1].isSuccess,E=function(){N(Object($.b)()),c(!1)},V=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),N(Object($.f)(!0)),e.next=4,I({callId:v.callDocId});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.b.collection("calls").doc(v.callDocId),e.next=3,t.update({callDeclined:!0});case 3:E();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.b.collection("users").doc(t),e.next=3,n.get();case 3:a=e.sent,x(a.data());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){N(Object($.b)())}),[N]),Object(o.useEffect)((function(){D&&v&&t.push("/call")}),[D,v,t]),Object(o.useEffect)((function(){var e;k&&v?((e=Z,function(){p((function(){return e})),c(!0)})(),B(v.from)):(x(null),c(!1))}),[k,v]),Object(L.jsx)(X.a,{open:r,onClose:E,TransitionComponent:m,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:2e4,children:Object(L.jsxs)(j.a,{elevation:7,className:e.root,children:[Object(L.jsx)(S.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Incoming Call"}),O&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(w.a,{src:O.photoURL,alt:"Incoming Call Profile",style:{height:"7rem",width:"7rem",margin:"1rem"}}),Object(L.jsx)(S.a,{variant:"h6",align:"center",gutterBottom:!0,children:O.displayName}),Object(L.jsxs)("div",{className:e.controls,children:[Object(L.jsx)("div",{className:e.control,children:Object(L.jsx)(y.a,{style:{padding:"5px",borderRadius:"50%",minWidth:0},variant:"outlined",color:"primary",onClick:V,children:Object(L.jsx)(R.a,{style:{fontSize:"3rem"}})})}),Object(L.jsx)("div",{className:e.control,children:Object(L.jsx)(y.a,{style:{padding:"5px",borderRadius:"50%",minWidth:0},variant:"outlined",color:"secondary",onClick:z,children:Object(L.jsx)(G.a,{style:{fontSize:"3rem"}})})})]})]})]})},m?m.name:"")},ee=n(30),te=n(44),ne=n(158),ae=n(159),ie=n(87),re=n.n(ie),ce=n(427),oe=n.n(ce),se=n(428),le=n.n(se),de=Object(c.a)((function(e){return{root:Object(r.a)({width:"11rem",minHeight:"18rem",margin:"1rem 0",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},e.breakpoints.down("sm"),{padding:"0.5rem",minHeight:"13rem",height:"fit-content",width:"7rem",gap:0}),avatarImage:Object(r.a)({height:e.spacing(12),width:e.spacing(12),marginTop:"1rem"},e.breakpoints.down("sm"),{height:e.spacing(8),width:e.spacing(8),margin:0,marginBottom:"0.5rem"}),controls:{display:"flex",justifyContent:"space-between",width:"100%",marginTop:"auto"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}}})),ue=function(e){var t=e.card,n=de(),a=Object(te.a)(),r=Object(b.a)(a.breakpoints.down("sm")),c=Object(o.useRef)(),s=z(c),l=Object(o.useState)({displayName:"",photoURL:""}),m=Object(i.a)(l,2),p=m[0],f=m[1],h=Object(T.c)(),O=Object(i.a)(h,1)[0],x=Object(T.d)(),v=Object(i.a)(x,1)[0];Object(o.useEffect)((function(){var e=function(){};return s&&!p.displayName.length&&(e=g.b.collection("users").doc(t.isCaller?t.userOnOtherSide:t.from).get().then((function(e){var t=e.data(),n=t.displayName,a=t.photoURL;f({displayName:n,photoURL:a})})).catch((function(e){console.error(e)}))),e}),[t,s,p]);var k=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v({callId:t.id});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsx)(j.a,{ref:c,elevation:6,className:n.root,children:0===p.displayName.length?Object(L.jsx)("div",{className:n.loading,children:Object(L.jsx)(ne.a,{})}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(w.a,{alt:"profile",src:p.photoURL,className:n.avatarImage}),Object(L.jsx)(S.a,{variant:r?"subtitle1":"h6",children:p.displayName}),Object(L.jsx)(ae.a,{title:"".concat(t.isCaller?"Outgoing":"Incomming","  ").concat(t.callAccepted?"call accepted":t.callDeclined?"call declined":"call didn't connect"),arrow:!0,children:Object(L.jsx)(y.a,{style:{padding:r?"2px":"5px",borderRadius:"50%",minWidth:0},color:t.callAccepted?"primary":t.callDeclined?"secondary":"default",disableElevation:!t.callAccepted&&!t.callDeclined,children:t.isCaller?Object(L.jsx)(oe.a,{}):Object(L.jsx)(le.a,{})})}),Object(L.jsx)(S.a,{color:"textSecondary",variant:"subtitle2",children:function(){for(var e=0,n=["year","month","day","hour","minute","second"];e<n.length;e++){var a=n[e];if(a){var i=re()().diff(re()(t.timeStamp),a);if(i)return"".concat(i," ").concat(a).concat(i>1?"s":""," ago")}}}()}),Object(L.jsxs)("div",{className:n.controls,children:[Object(L.jsx)("div",{className:n.control,children:Object(L.jsx)(y.a,{style:{padding:r?"2px":"5px",borderRadius:"50%",minWidth:0},variant:"outlined",color:"primary",onClick:function(){O({userOnOtherSide:t.isCaller?t.userOnOtherSide:t.from})},children:Object(L.jsx)(R.a,{style:{fontSize:r?"1.5rem":"2rem"}})})}),Object(L.jsx)("div",{className:n.control,children:Object(L.jsx)(y.a,{style:{padding:r?"2px":"5px",borderRadius:"50%",minWidth:0},variant:"outlined",color:"secondary",onClick:k,children:Object(L.jsx)(G.a,{style:{fontSize:r?"1.5rem":"2rem"}})})})]})]})})},be=n(471),je=n(467),me=n(469),pe=n(466),fe=n(412),he=n.n(fe);n(410),n(411);me.a.use([pe.a]);var Oe=Object(c.a)((function(e){return{root:Object(r.a)({width:"100%",overflow:"hidden",marginBottom:"4rem"},e.breakpoints.down("sm"),{marginBottom:"1rem"}),swiperContainer:{width:"100%",position:"relative"},next:{position:"absolute",top:"50%",right:0,transform:"translate(0, -50%)",zIndex:10,cursor:"pointer",opacity:.2,transition:"all 0.3s ease","&:hover":{opacity:1,transform:"translate(0, -50%) scale(1.2)"}},prev:{position:"absolute",top:"50%",left:0,transform:"translate(0, -50%)",zIndex:10,cursor:"pointer",opacity:.2,transition:"all 0.3s ease","&:hover":{opacity:1,transform:"translate(0, -50%) scale(1.2)"}}}})),ge=function(){var e=Oe(),t=Object(s.useSelector)((function(e){return e.user.userData.uid})),n=Object(o.useState)([]),r=Object(i.a)(n,2),c=r[0],l=r[1],d=Object(o.useState)([]),u=Object(i.a)(d,2),b=u[0],j=u[1],m=[].concat(Object(ee.a)(c),Object(ee.a)(b)).sort((function(e,t){return new Date(t.timeStamp)-new Date(e.timeStamp)}));return Object(o.useEffect)((function(){var e=function(){},n=function(){};return t&&(e=g.b.collection("calls").where("from","==",t).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{id:e.id})})).map((function(e){var t;return Object(a.a)(Object(a.a)({},e),{},{timeStamp:null===e||void 0===e||null===(t=e.timeStamp)||void 0===t?void 0:t.toMillis(),isCaller:!0})}));l(t)})),n=g.b.collection("calls").where("userOnOtherSide","==",t).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(a.a)(Object(a.a)({},e.data()),{},{id:e.id})})).map((function(e){var t;return Object(a.a)(Object(a.a)({},e),{},{timeStamp:null===e||void 0===e||null===(t=e.timeStamp)||void 0===t?void 0:t.toMillis(),isCaller:!1})}));j(t)}))),function(){e(),n()}}),[t]),Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(S.a,{variant:"h5",gutterBottom:!0,children:"Recent Calls"}),Object(L.jsx)("div",{className:e.swiperContainer,children:m.length?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:"".concat(e.next," next"),children:Object(L.jsx)(he.a,{fontSize:"large"})}),Object(L.jsx)("div",{className:"".concat(e.prev," prev"),children:Object(L.jsx)(he.a,{style:{transform:"scale(-1)"},fontSize:"large"})})," ",Object(L.jsx)(be.a,{slidesPerView:1,freeMode:!0,navigation:{nextEl:".next",prevEl:".prev"},className:"mySwiper",breakpoints:{150:{slidesPerView:1},300:{slidesPerView:2},500:{slidesPerView:3},620:{slidesPerView:4},900:{slidesPerView:5},960:{slidesPerView:2},1100:{slidesPerView:3},1300:{slidesPerView:4},1500:{slidesPerView:5},1700:{slidesPerView:6},1900:{slidesPerView:7},2100:{slidesPerView:8}},children:m.map((function(e,t){return Object(L.jsx)(je.a,{style:{transform:"translateX(1.6rem)"},children:Object(L.jsx)(ue,{card:e})},t)}))})]}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(S.a,{variant:"h4",align:"center",color:"textSecondary",gutterBottom:!0,children:"Your recent calls will appear here"}),Object(L.jsx)(S.a,{variant:"h6",align:"center",color:"textSecondary",children:"Make calls to your friends from the bottom left panel."})]})})]})},xe=n(181),ve=n.n(xe),we=Object(c.a)((function(e){return{root:Object(r.a)({width:"11rem",minHeight:"18rem",margin:"1rem 0",padding:"1rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem"},e.breakpoints.down("sm"),{padding:"0.5rem",minHeight:"13rem",height:"fit-content",width:"7rem",gap:0}),avatarImage:Object(r.a)({height:e.spacing(12),width:e.spacing(12),marginTop:"1rem"},e.breakpoints.down("sm"),{height:e.spacing(8),width:e.spacing(8),margin:0,marginBottom:"0.5rem"}),friends:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",flex:1}}})),ye=function(e){var t=e.uid,n=e.refetch,a=we(),r=Object(te.a)(),c=Object(b.a)(r.breakpoints.down("sm")),s=Object(o.useRef)(),l=Object(B.e)(),m=Object(i.a)(l,1)[0],p=z(s),f=Object(o.useState)({displayName:"",photoURL:"",status:""}),h=Object(i.a)(f,2),O=h[0],x=h[1],v=Object(o.useState)(0),k=Object(i.a)(v,2),N=k[0],C=k[1];Object(o.useEffect)((function(){p&&(g.b.collection("users").doc(t).get().then((function(e){x(e.data())})),g.b.collection("users").doc(t).collection("friends").get().then((function(e){C(e.docs.length)})))}),[p,t]);var P=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({friendUid:t});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(L.jsxs)(j.a,{ref:s,elevation:6,className:a.root,children:[Object(L.jsx)(w.a,{alt:"profile",src:O.photoURL,className:a.avatarImage}),O.displayName.length?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(S.a,{variant:c?"subtitle1":"h6",children:O.displayName}),Object(L.jsxs)("div",{className:a.friends,children:[Object(L.jsxs)(S.a,{variant:c?"caption":"subtitle1",color:"textSecondary",style:{display:"flex",justifyContent:"space-between",gap:"0.5rem"},children:["Friends:"," ",Object(L.jsx)(S.a,{vvariant:c?"caption":"subtitle1",color:"textPrimary",style:{display:"inline-block"},children:N})]}),Object(L.jsx)(y.a,{style:{padding:c?"2px":"5px",minWidth:0},variant:"outlined",color:"primary",onClick:P,children:Object(L.jsx)(ve.a,{})})]}),Object(L.jsxs)(S.a,{style:{fontStyle:"italic",marginTop:"1.5rem"},color:"textSecondary",variant:c?"caption":"subtitle1",align:"center",children:['"',O.status,'"']})]}):Object(L.jsx)("div",{className:a.loading,children:Object(L.jsx)(ne.a,{})})]})},Se=n(104),ke=n(71);me.a.use([pe.a]);var Ne=Object(c.a)((function(e){return{root:Object(r.a)({width:"100%",overflow:"hidden",marginBottom:"4rem"},e.breakpoints.down("sm"),{marginBottom:"1rem"}),swiperContainer:{width:"100%",position:"relative"},next:{position:"absolute",top:"50%",right:0,transform:"translate(0, -50%)",zIndex:10,cursor:"pointer",opacity:.2,transition:"all 0.3s ease","&:hover":{opacity:1,transform:"translate(0, -50%) scale(1.2)"}},prev:{position:"absolute",top:"50%",left:0,transform:"translate(0, -50%)",zIndex:10,cursor:"pointer",opacity:.2,transition:"all 0.3s ease","&:hover":{opacity:1,transform:"translate(0, -50%) scale(1.2)"}},defaultHeight:{width:"100%",height:"18rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}})),Ce=function(){var e=Ne(),t=Object(Se.b)(),n=t.data,a=t.isError,i=t.isLoading,r=t.refetch;return console.log(Object(Se.b)()),Object(o.useEffect)((function(){a&&ke.b.error("Error Fetching Suggestions!!")}),[a]),Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsx)(S.a,{variant:"h5",gutterBottom:!0,children:"Suggestions"}),i?Object(L.jsx)("div",{className:e.defaultHeight,children:Object(L.jsx)(ne.a,{})}):(null===n||void 0===n?void 0:n.suggestions.length)?Object(L.jsxs)("div",{className:e.swiperContainer,children:[Object(L.jsx)("div",{className:"".concat(e.next," next2"),children:Object(L.jsx)(he.a,{fontSize:"large"})}),Object(L.jsx)("div",{className:"".concat(e.prev," prev2"),children:Object(L.jsx)(he.a,{style:{transform:"scale(-1)"},fontSize:"large"})}),Object(L.jsx)(be.a,{slidesPerView:1,freeMode:!0,navigation:{nextEl:".next2",prevEl:".prev2"},className:"mySwiper",breakpoints:{150:{slidesPerView:1},300:{slidesPerView:2},500:{slidesPerView:3},620:{slidesPerView:4},900:{slidesPerView:5},960:{slidesPerView:2},1100:{slidesPerView:3},1300:{slidesPerView:4},1500:{slidesPerView:5},1700:{slidesPerView:6},1900:{slidesPerView:7},2100:{slidesPerView:8}},children:n.suggestions.map((function(e,t){return Object(L.jsx)(je.a,{style:{transform:"translateX(1.6rem)"},children:Object(L.jsx)(ye,{refetch:r,uid:e})},t)}))})]}):Object(L.jsxs)("div",{className:e.defaultHeight,children:[Object(L.jsx)(S.a,{variant:"h4",align:"center",color:"textSecondary",gutterBottom:!0,children:"No suggestions for you at the moment"}),Object(L.jsx)(S.a,{variant:"h6",align:"center",color:"textSecondary",children:"Looks like you are an early user of the the platform. Welcome!"})]})]})},Pe=n(468),Ie=n(99),De=n.p+"static/media/profileWave.8aa86d13.svg",Re=n(15),Ee=Object(Re.a)([function(e){return e.friends}],(function(e){return e.friendsData.length})),Ve=n(182),ze=Object(c.a)((function(e){return{root:Object(r.a)({width:"100%",position:"relative"},e.breakpoints.down("sm"),{width:"unset",minWidth:"8rem",maxWidth:"8rem"}),paper:Object(r.a)({width:"100%",overflow:"hidden"},e.breakpoints.down("sm"),{height:"100%",overflowY:"scroll"}),imagePreview:Object(r.a)({position:"relative",background:e.palette.primary.main,height:"7rem",width:"100%"},e.breakpoints.down("sm"),{height:"3rem"}),wave:{position:"absolute",bottom:0,width:"100%",transform:"translateY(70%)"},imageContainer:{position:"absolute",bottom:0,left:"50%",transform:"translate(-50%, 50%)",borderRadius:"50%",border:"5px solid ".concat(e.palette.background.paper)},image:Object(r.a)({height:e.spacing(17),width:e.spacing(17)},e.breakpoints.down("sm"),{height:e.spacing(10),width:e.spacing(10)}),profileText:Object(r.a)({marginTop:e.spacing(10),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{marginTop:e.spacing(6),marginBottom:e.spacing(2)}),detailsText:Object(r.a)({marginTop:e.spacing(2),marginBottom:e.spacing(2)},e.breakpoints.down("sm"),{margin:0,"&.profileLink":{margin:e.spacing(1)}})}})),Be=Object(x.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper)},dot:{width:e.spacing(2),height:e.spacing(2),borderRadius:"50%"}}}))(v.a),Te=function(e){var t=e.setFriendPanelHeight,n=ze(),a=Object(te.a)(),i=Object(b.a)(a.breakpoints.down("sm")),r=Object(s.useSelector)((function(e){return e.user})).userData,c=r.displayName,l=r.status,d=r.photoURL,u=Object(s.useSelector)(Ee),m=Object(o.useRef)(null);return Object(o.useEffect)((function(){if(i){var e,n=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().height;t(n),window.addEventListener("resize",(function(){var e,n=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect().height;t(n)}))}else t(null);return function(){window.removeEventListener("resize",(function(){}))}}),[i,t]),Object(L.jsx)("div",{ref:m,className:n.root,children:Object(L.jsxs)(j.a,{className:n.paper,elevation:6,children:[Object(L.jsxs)("div",{className:n.imagePreview,children:[Object(L.jsx)("img",{className:n.wave,src:De,alt:"wave"}),Object(L.jsx)("div",{className:n.imageContainer,children:Object(L.jsx)(Be,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:Object(L.jsx)(w.a,{className:n.image,alt:"photo",src:d})})})]}),Object(L.jsxs)("div",{className:n.profileText,children:[Object(L.jsx)(Ve.a,{}),Object(L.jsx)(S.a,{gutterBottom:!0,variant:i?"subtitle1":"h5",align:"center",children:c}),Object(L.jsxs)(S.a,{variant:i?"caption":"subtitle2",align:"center",component:"div",color:"textSecondary",style:{fontStyle:"italic"},children:['"',l,'"']})]}),Object(L.jsx)(Pe.a,{}),Object(L.jsxs)("div",{className:n.detailsText,children:[Object(L.jsx)(S.a,{gutterBottom:!0,variant:i?"subtitle1":"h5",align:"center",color:"textSecondary",children:"Friends"}),Object(L.jsx)(S.a,{gutterBottom:!0,variant:i?"subtitle1":"h5",align:"center",color:"textPrimary",children:u})]}),Object(L.jsx)(Pe.a,{}),Object(L.jsx)("div",{className:"".concat(n.detailsText," profileLink"),children:Object(L.jsx)(Ie.b,{to:"/profile",children:Object(L.jsx)(S.a,{variant:"subtitle2",align:"center",component:"div",color:"primary",style:{textDecoration:"underline"},children:"View Profile"})})})]})})},Le=n(186),Fe=Object(c.a)((function(e){return{root:{flex:1,display:"flex",position:"relative"},flexParent:Object(r.a)({display:"flex",justifyContent:"space-between",width:"100%",marginTop:"7rem"},e.breakpoints.down("sm"),{flexDirection:"column",alignItems:"center",gap:"1rem"}),leftPanel:Object(r.a)({width:"18rem",height:"87vh",alignSelf:"flex-start",position:"fixed",display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"1rem"},e.breakpoints.down("sm"),{position:"unset",width:"100%",flexDirection:"row",height:"unset",gap:"0.5rem",alignItems:"flex-start"}),middlePanel:Object(r.a)({flex:1,marginLeft:"20rem",width:"calc(100% - 20rem)"},e.breakpoints.down("sm"),{width:"100%",marginLeft:0})}}));t.default=function(){var e=Fe(),t=Object(o.useState)(0),n=Object(i.a)(t,2),r=n[0],c=n[1],l=Object(o.useRef)(),d=Object(o.useRef)(),u=Object(s.useSelector)((function(e){return e.user.userData.uid})),b=Object(s.useSelector)((function(e){return e.call.activeCallDocId})),j=Object(s.useDispatch)(),m=Object(K.g)(),p=function(){l.current&&(clearTimeout(l.current),l.current=null),d.current&&(ke.b.dismiss(d.current),d.current=null)};return Object(o.useEffect)((function(){var e=(new Date).getTime(),t=function(){},n=function(){};if(u){var i=g.b.collection("users").doc(u).collection("friends"),r=g.b.collection("calls").where("userOnOtherSide","==",u).orderBy("timeStamp","asc");t=i.onSnapshot((function(e){var t=e.docs.map((function(e){return e.data()}));j(Object(Le.b)(t))})),n=r.onSnapshot((function(t){t.docChanges().forEach((function(t){var n,i=t.doc.data();"added"===t.type&&(null===i||void 0===i||null===(n=i.timeStamp)||void 0===n?void 0:n.toMillis())>e&&(p(),j(Object($.e)(!0)),j(Object($.f)(!0)),j(Object($.c)(Object(a.a)(Object(a.a)({},i),{},{timeStamp:i.timeStamp.toMillis(),callDocId:t.doc.id}))))}))}))}return function(){t(),n()}}),[u,j]),Object(o.useEffect)((function(){var e;return b?(d.current=ke.b.loading("Calling...",{position:"bottom-center"}),l.current=setTimeout((function(){p(),j(Object($.b)()),ke.b.error("Call Timed Out")}),25e3),j(Object($.e)(!0)),e=g.b.collection("calls").doc(b).onSnapshot((function(e){var t=e.data(),n=t.callAccepted,i=t.callDeclined;n&&(p(),ke.b.success("Connecting Call"),j(Object($.c)(Object(a.a)(Object(a.a)({},t),{},{callDocId:b,timeStamp:t.timeStamp.toMillis()}))),m.push("/call")),i&&(p(),j(Object($.b)()),ke.b.error("Call Declined"))}))):(p(),j(Object($.b)())),function(){e&&e()}}),[b,j,m]),Object(L.jsxs)("div",{className:e.root,children:[Object(L.jsxs)("div",{className:e.flexParent,children:[Object(L.jsxs)("div",{className:e.leftPanel,children:[Object(L.jsx)(Te,{setFriendPanelHeight:c}),Object(L.jsx)(Y,{friendPanelHeight:r})]}),Object(L.jsxs)("div",{className:e.middlePanel,children:[Object(L.jsx)(ge,{}),Object(L.jsx)(Ce,{})]})]}),Object(L.jsx)(_,{})]})}}}]);
//# sourceMappingURL=9.b2502a3b.chunk.js.map